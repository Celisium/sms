.include "macros.inc"

.section .text, "ax"  # 0x80005600 - 0x8036FBA0
.global __OSInitAudioSystem
__OSInitAudioSystem:
/* 8008DCD4 0008AC14  7C 08 02 A6 */	mflr r0
/* 8008DCD8 0008AC18  90 01 00 04 */	stw r0, 4(r1)
/* 8008DCDC 0008AC1C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8008DCE0 0008AC20  BF 21 00 14 */	stmw r25, 0x14(r1)
/* 8008DCE4 0008AC24  4B FF FF D1 */	bl OSGetArenaHi
/* 8008DCE8 0008AC28  3C 80 81 00 */	lis r4, 0x8100
/* 8008DCEC 0008AC2C  38 A0 00 80 */	li r5, 0x80
/* 8008DCF0 0008AC30  38 63 FF 80 */	addi r3, r3, -128
/* 8008DCF4 0008AC34  4B F7 55 01 */	bl memcpy
/* 8008DCF8 0008AC38  3C 60 80 3B */	lis r3, DSPInitCode@ha
/* 8008DCFC 0008AC3C  38 83 F6 18 */	addi r4, r3, DSPInitCode@l
/* 8008DD00 0008AC40  3C 60 81 00 */	lis r3, 0x8100
/* 8008DD04 0008AC44  38 A0 00 80 */	li r5, 0x80
/* 8008DD08 0008AC48  4B F7 54 ED */	bl memcpy
/* 8008DD0C 0008AC4C  3C 60 81 00 */	lis r3, 0x8100
/* 8008DD10 0008AC50  38 80 00 80 */	li r4, 0x80
/* 8008DD14 0008AC54  48 00 02 99 */	bl DCFlushRange
/* 8008DD18 0008AC58  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 8008DD1C 0008AC5C  38 63 50 00 */	addi r3, r3, 0xCC005000@l
/* 8008DD20 0008AC60  38 00 00 43 */	li r0, 0x43
/* 8008DD24 0008AC64  B0 03 00 12 */	sth r0, 0x12(r3)
/* 8008DD28 0008AC68  3B E3 00 0A */	addi r31, r3, 0xa
/* 8008DD2C 0008AC6C  38 00 08 AC */	li r0, 0x8ac
/* 8008DD30 0008AC70  B0 03 00 0A */	sth r0, 0xa(r3)
/* 8008DD34 0008AC74  A0 03 00 0A */	lhz r0, 0xa(r3)
/* 8008DD38 0008AC78  60 00 00 01 */	ori r0, r0, 1
/* 8008DD3C 0008AC7C  B0 03 00 0A */	sth r0, 0xa(r3)
lbl_8008DD40:
/* 8008DD40 0008AC80  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DD44 0008AC84  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8008DD48 0008AC88  40 82 FF F8 */	bne lbl_8008DD40
/* 8008DD4C 0008AC8C  38 00 00 00 */	li r0, 0
/* 8008DD50 0008AC90  3C 80 CC 00 */	lis r4, 0xCC005000@ha
/* 8008DD54 0008AC94  B0 04 50 00 */	sth r0, 0xCC005000@l(r4)
lbl_8008DD58:
/* 8008DD58 0008AC98  3B C4 50 00 */	addi r30, r4, 0x5000
/* 8008DD5C 0008AC9C  A4 7E 00 04 */	lhzu r3, 4(r30)
/* 8008DD60 0008ACA0  3B A4 50 00 */	addi r29, r4, 0x5000
/* 8008DD64 0008ACA4  A4 1D 00 06 */	lhzu r0, 6(r29)
/* 8008DD68 0008ACA8  50 60 80 1E */	rlwimi r0, r3, 0x10, 0, 0xf
/* 8008DD6C 0008ACAC  54 00 00 01 */	rlwinm. r0, r0, 0, 0, 0
/* 8008DD70 0008ACB0  40 82 FF E8 */	bne lbl_8008DD58
/* 8008DD74 0008ACB4  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 8008DD78 0008ACB8  3C 00 01 00 */	lis r0, 0x100
/* 8008DD7C 0008ACBC  3B 63 50 00 */	addi r27, r3, 0xCC005000@l
/* 8008DD80 0008ACC0  94 1B 00 20 */	stwu r0, 0x20(r27)
/* 8008DD84 0008ACC4  38 00 00 00 */	li r0, 0
/* 8008DD88 0008ACC8  3B 43 50 00 */	addi r26, r3, 0x5000
/* 8008DD8C 0008ACCC  94 1A 00 24 */	stwu r0, 0x24(r26)
/* 8008DD90 0008ACD0  38 00 00 20 */	li r0, 0x20
/* 8008DD94 0008ACD4  3B 23 50 00 */	addi r25, r3, 0x5000
/* 8008DD98 0008ACD8  94 19 00 28 */	stwu r0, 0x28(r25)
/* 8008DD9C 0008ACDC  A0 7F 00 00 */	lhz r3, 0(r31)
/* 8008DDA0 0008ACE0  48 00 00 08 */	b lbl_8008DDA8
lbl_8008DDA4:
/* 8008DDA4 0008ACE4  A0 7F 00 00 */	lhz r3, 0(r31)
lbl_8008DDA8:
/* 8008DDA8 0008ACE8  54 60 06 B5 */	rlwinm. r0, r3, 0, 0x1a, 0x1a
/* 8008DDAC 0008ACEC  41 82 FF F8 */	beq lbl_8008DDA4
/* 8008DDB0 0008ACF0  B0 7F 00 00 */	sth r3, 0(r31)
/* 8008DDB4 0008ACF4  48 00 60 5D */	bl OSGetTick
/* 8008DDB8 0008ACF8  7C 7C 1B 78 */	mr r28, r3
lbl_8008DDBC:
/* 8008DDBC 0008ACFC  48 00 60 55 */	bl OSGetTick
/* 8008DDC0 0008AD00  7C 1C 18 50 */	subf r0, r28, r3
/* 8008DDC4 0008AD04  2C 00 08 92 */	cmpwi r0, 0x892
/* 8008DDC8 0008AD08  41 80 FF F4 */	blt lbl_8008DDBC
/* 8008DDCC 0008AD0C  3C 00 01 00 */	lis r0, 0x100
/* 8008DDD0 0008AD10  90 1B 00 00 */	stw r0, 0(r27)
/* 8008DDD4 0008AD14  38 60 00 00 */	li r3, 0
/* 8008DDD8 0008AD18  38 00 00 20 */	li r0, 0x20
/* 8008DDDC 0008AD1C  90 7A 00 00 */	stw r3, 0(r26)
/* 8008DDE0 0008AD20  90 19 00 00 */	stw r0, 0(r25)
/* 8008DDE4 0008AD24  A0 7F 00 00 */	lhz r3, 0(r31)
/* 8008DDE8 0008AD28  48 00 00 08 */	b lbl_8008DDF0
lbl_8008DDEC:
/* 8008DDEC 0008AD2C  A0 7F 00 00 */	lhz r3, 0(r31)
lbl_8008DDF0:
/* 8008DDF0 0008AD30  54 60 06 B5 */	rlwinm. r0, r3, 0, 0x1a, 0x1a
/* 8008DDF4 0008AD34  41 82 FF F8 */	beq lbl_8008DDEC
/* 8008DDF8 0008AD38  B0 7F 00 00 */	sth r3, 0(r31)
/* 8008DDFC 0008AD3C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DE00 0008AD40  54 00 05 66 */	rlwinm r0, r0, 0, 0x15, 0x13
/* 8008DE04 0008AD44  B0 1F 00 00 */	sth r0, 0(r31)
lbl_8008DE08:
/* 8008DE08 0008AD48  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DE0C 0008AD4C  54 00 05 6B */	rlwinm. r0, r0, 0, 0x15, 0x15
/* 8008DE10 0008AD50  40 82 FF F8 */	bne lbl_8008DE08
/* 8008DE14 0008AD54  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DE18 0008AD58  54 00 07 B8 */	rlwinm r0, r0, 0, 0x1e, 0x1c
/* 8008DE1C 0008AD5C  B0 1F 00 00 */	sth r0, 0(r31)
/* 8008DE20 0008AD60  A0 1E 00 00 */	lhz r0, 0(r30)
/* 8008DE24 0008AD64  48 00 00 08 */	b lbl_8008DE2C
lbl_8008DE28:
/* 8008DE28 0008AD68  A0 1E 00 00 */	lhz r0, 0(r30)
lbl_8008DE2C:
/* 8008DE2C 0008AD6C  54 05 04 3E */	clrlwi r5, r0, 0x10
/* 8008DE30 0008AD70  54 00 04 21 */	rlwinm. r0, r0, 0, 0x10, 0x10
/* 8008DE34 0008AD74  41 82 FF F4 */	beq lbl_8008DE28
/* 8008DE38 0008AD78  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DE3C 0008AD7C  A0 9D 00 00 */	lhz r4, 0(r29)
/* 8008DE40 0008AD80  60 00 00 04 */	ori r0, r0, 4
/* 8008DE44 0008AD84  B0 1F 00 00 */	sth r0, 0(r31)
/* 8008DE48 0008AD88  38 00 08 AC */	li r0, 0x8ac
/* 8008DE4C 0008AD8C  B0 1F 00 00 */	sth r0, 0(r31)
/* 8008DE50 0008AD90  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DE54 0008AD94  60 00 00 01 */	ori r0, r0, 1
/* 8008DE58 0008AD98  B0 1F 00 00 */	sth r0, 0(r31)
lbl_8008DE5C:
/* 8008DE5C 0008AD9C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DE60 0008ADA0  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8008DE64 0008ADA4  40 82 FF F8 */	bne lbl_8008DE5C
/* 8008DE68 0008ADA8  4B FF FE 4D */	bl OSGetArenaHi
/* 8008DE6C 0008ADAC  38 83 FF 80 */	addi r4, r3, -128
/* 8008DE70 0008ADB0  3C 60 81 00 */	lis r3, 0x8100
/* 8008DE74 0008ADB4  38 A0 00 80 */	li r5, 0x80
/* 8008DE78 0008ADB8  4B F7 53 7D */	bl memcpy
/* 8008DE7C 0008ADBC  BB 21 00 14 */	lmw r25, 0x14(r1)
/* 8008DE80 0008ADC0  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8008DE84 0008ADC4  38 21 00 30 */	addi r1, r1, 0x30
/* 8008DE88 0008ADC8  7C 08 03 A6 */	mtlr r0
/* 8008DE8C 0008ADCC  4E 80 00 20 */	blr 

.global __OSStopAudioSystem
__OSStopAudioSystem:
/* 8008DE90 0008ADD0  7C 08 02 A6 */	mflr r0
/* 8008DE94 0008ADD4  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 8008DE98 0008ADD8  90 01 00 04 */	stw r0, 4(r1)
/* 8008DE9C 0008ADDC  38 00 08 04 */	li r0, 0x804
/* 8008DEA0 0008ADE0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8008DEA4 0008ADE4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8008DEA8 0008ADE8  3B E3 50 00 */	addi r31, r3, 0xCC005000@l
/* 8008DEAC 0008ADEC  38 63 50 00 */	addi r3, r3, 0x5000
/* 8008DEB0 0008ADF0  93 C1 00 08 */	stw r30, 8(r1)
/* 8008DEB4 0008ADF4  B0 1F 00 0A */	sth r0, 0xa(r31)
/* 8008DEB8 0008ADF8  A0 03 00 36 */	lhz r0, 0x36(r3)
/* 8008DEBC 0008ADFC  54 00 04 5E */	rlwinm r0, r0, 0, 0x11, 0xf
/* 8008DEC0 0008AE00  B0 03 00 36 */	sth r0, 0x36(r3)
/* 8008DEC4 0008AE04  A4 1F 00 0A */	lhzu r0, 0xa(r31)
/* 8008DEC8 0008AE08  48 00 00 08 */	b lbl_8008DED0
lbl_8008DECC:
/* 8008DECC 0008AE0C  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_8008DED0:
/* 8008DED0 0008AE10  54 00 05 6B */	rlwinm. r0, r0, 0, 0x15, 0x15
/* 8008DED4 0008AE14  40 82 FF F8 */	bne lbl_8008DECC
/* 8008DED8 0008AE18  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DEDC 0008AE1C  48 00 00 08 */	b lbl_8008DEE4
lbl_8008DEE0:
/* 8008DEE0 0008AE20  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_8008DEE4:
/* 8008DEE4 0008AE24  54 00 05 AD */	rlwinm. r0, r0, 0, 0x16, 0x16
/* 8008DEE8 0008AE28  40 82 FF F8 */	bne lbl_8008DEE0
/* 8008DEEC 0008AE2C  38 00 08 AC */	li r0, 0x8ac
/* 8008DEF0 0008AE30  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 8008DEF4 0008AE34  B0 1F 00 00 */	sth r0, 0(r31)
/* 8008DEF8 0008AE38  38 00 00 00 */	li r0, 0
/* 8008DEFC 0008AE3C  B0 03 50 00 */	sth r0, 0xCC005000@l(r3)
/* 8008DF00 0008AE40  38 83 50 00 */	addi r4, r3, 0x5000
lbl_8008DF04:
/* 8008DF04 0008AE44  A0 64 00 04 */	lhz r3, 4(r4)
/* 8008DF08 0008AE48  A0 04 00 06 */	lhz r0, 6(r4)
/* 8008DF0C 0008AE4C  50 60 80 1E */	rlwimi r0, r3, 0x10, 0, 0xf
/* 8008DF10 0008AE50  54 00 00 01 */	rlwinm. r0, r0, 0, 0, 0
/* 8008DF14 0008AE54  40 82 FF F0 */	bne lbl_8008DF04
/* 8008DF18 0008AE58  48 00 5E F9 */	bl OSGetTick
/* 8008DF1C 0008AE5C  7C 7E 1B 78 */	mr r30, r3
lbl_8008DF20:
/* 8008DF20 0008AE60  48 00 5E F1 */	bl OSGetTick
/* 8008DF24 0008AE64  7C 1E 18 50 */	subf r0, r30, r3
/* 8008DF28 0008AE68  2C 00 00 2C */	cmpwi r0, 0x2c
/* 8008DF2C 0008AE6C  41 80 FF F4 */	blt lbl_8008DF20
/* 8008DF30 0008AE70  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DF34 0008AE74  60 00 00 01 */	ori r0, r0, 1
/* 8008DF38 0008AE78  B0 1F 00 00 */	sth r0, 0(r31)
/* 8008DF3C 0008AE7C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8008DF40 0008AE80  48 00 00 08 */	b lbl_8008DF48
lbl_8008DF44:
/* 8008DF44 0008AE84  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_8008DF48:
/* 8008DF48 0008AE88  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8008DF4C 0008AE8C  40 82 FF F8 */	bne lbl_8008DF44
/* 8008DF50 0008AE90  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8008DF54 0008AE94  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8008DF58 0008AE98  83 C1 00 08 */	lwz r30, 8(r1)
/* 8008DF5C 0008AE9C  38 21 00 10 */	addi r1, r1, 0x10
/* 8008DF60 0008AEA0  7C 08 03 A6 */	mtlr r0
/* 8008DF64 0008AEA4  4E 80 00 20 */	blr 

.section .data, "wa"  # 0x803A8380 - 0x803E6000
DSPInitCode:
	.4byte 0x029F0010
	.4byte 0x029F0033
	.4byte 0x029F0034
	.4byte 0x029F0035
	.4byte 0x029F0036
	.4byte 0x029F0037
	.4byte 0x029F0038
	.4byte 0x029F0039
	.4byte 0x12061203
	.4byte 0x12041205
	.4byte 0x00808000
	.4byte 0x0088FFFF
	.4byte 0x00841000
	.4byte 0x0064001D
	.4byte 0x02180000
	.4byte 0x81001C1E
	.4byte 0x00441B1E
	.4byte 0x00840800
	.4byte 0x00640027
	.4byte 0x191E0000
	.4byte 0x00DEFFFC
	.4byte 0x02A08000
	.4byte 0x029C0028
	.4byte 0x16FC0054
	.4byte 0x16FD4348
	.4byte 0x002102FF
	.4byte 0x02FF02FF
	.4byte 0x02FF02FF
	.4byte 0x02FF02FF
	.4byte 0
	.4byte 0
	.4byte 0
