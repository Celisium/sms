.include "macros.inc"

.section .init, "ax"  # 0x80003100 - 0x80005540
.global __check_pad3
__check_pad3:
/* 800051EC 000021EC  7C 08 02 A6 */	mflr r0
/* 800051F0 000021F0  3C 60 80 00 */	lis r3, 0x800030E4@ha
/* 800051F4 000021F4  90 01 00 04 */	stw r0, 4(r1)
/* 800051F8 000021F8  94 21 FF F8 */	stwu r1, -8(r1)
/* 800051FC 000021FC  A0 03 30 E4 */	lhz r0, 0x800030E4@l(r3)
/* 80005200 00002200  70 00 0E EF */	andi. r0, r0, 0xeef
/* 80005204 00002204  2C 00 0E EF */	cmpwi r0, 0xeef
/* 80005208 00002208  40 82 00 14 */	bne lbl_8000521C
/* 8000520C 0000220C  38 60 00 00 */	li r3, 0
/* 80005210 00002210  38 80 00 00 */	li r4, 0
/* 80005214 00002214  38 A0 00 00 */	li r5, 0
/* 80005218 00002218  48 08 C5 45 */	bl OSResetSystem
lbl_8000521C:
/* 8000521C 0000221C  80 01 00 0C */	lwz r0, 0xc(r1)
/* 80005220 00002220  38 21 00 08 */	addi r1, r1, 8
/* 80005224 00002224  7C 08 03 A6 */	mtlr r0
/* 80005228 00002228  4E 80 00 20 */	blr 

.global __start
__start:
/* 8000522C 0000222C  48 00 01 39 */	bl __init_registers
/* 80005230 00002230  48 00 02 11 */	bl __init_hardware
/* 80005234 00002234  38 00 FF FF */	li r0, -1
/* 80005238 00002238  94 21 FF F8 */	stwu r1, -8(r1)
/* 8000523C 0000223C  90 01 00 04 */	stw r0, 4(r1)
/* 80005240 00002240  90 01 00 00 */	stw r0, 0(r1)
/* 80005244 00002244  48 00 01 3D */	bl __init_data
/* 80005248 00002248  38 00 00 00 */	li r0, 0
/* 8000524C 0000224C  3C C0 80 00 */	lis r6, 0x80000044@ha
/* 80005250 00002250  38 C6 00 44 */	addi r6, r6, 0x80000044@l
/* 80005254 00002254  90 06 00 00 */	stw r0, 0(r6)
/* 80005258 00002258  3C C0 80 00 */	lis r6, 0x800000F4@ha
/* 8000525C 0000225C  38 C6 00 F4 */	addi r6, r6, 0x800000F4@l
/* 80005260 00002260  80 C6 00 00 */	lwz r6, 0(r6)
/* 80005264 00002264  28 06 00 00 */	cmplwi r6, 0
/* 80005268 00002268  41 82 00 0C */	beq lbl_80005274
/* 8000526C 0000226C  80 E6 00 0C */	lwz r7, 0xc(r6)
/* 80005270 00002270  48 00 00 24 */	b lbl_80005294
lbl_80005274:
/* 80005274 00002274  3C A0 80 00 */	lis r5, 0x80000034@ha
/* 80005278 00002278  38 A5 00 34 */	addi r5, r5, 0x80000034@l
/* 8000527C 0000227C  80 A5 00 00 */	lwz r5, 0(r5)
/* 80005280 00002280  28 05 00 00 */	cmplwi r5, 0
/* 80005284 00002284  41 82 00 38 */	beq lbl_800052BC
/* 80005288 00002288  3C E0 80 00 */	lis r7, 0x800030E8@ha
/* 8000528C 0000228C  38 E7 30 E8 */	addi r7, r7, 0x800030E8@l
/* 80005290 00002290  80 E7 00 00 */	lwz r7, 0(r7)
lbl_80005294:
/* 80005294 00002294  38 A0 00 00 */	li r5, 0
/* 80005298 00002298  28 07 00 02 */	cmplwi r7, 2
/* 8000529C 0000229C  41 82 00 10 */	beq lbl_800052AC
/* 800052A0 000022A0  28 07 00 03 */	cmplwi r7, 3
/* 800052A4 000022A4  40 82 00 18 */	bne lbl_800052BC
/* 800052A8 000022A8  38 A0 00 01 */	li r5, 1
lbl_800052AC:
/* 800052AC 000022AC  3C C0 80 09 */	lis r6, InitMetroTRK@ha
/* 800052B0 000022B0  38 C6 BA 14 */	addi r6, r6, InitMetroTRK@l
/* 800052B4 000022B4  7C C8 03 A6 */	mtlr r6
/* 800052B8 000022B8  4E 80 00 21 */	blrl 
lbl_800052BC:
/* 800052BC 000022BC  3C C0 80 00 */	lis r6, 0x800000F4@ha
/* 800052C0 000022C0  38 C6 00 F4 */	addi r6, r6, 0x800000F4@l
/* 800052C4 000022C4  80 A6 00 00 */	lwz r5, 0(r6)
/* 800052C8 000022C8  28 05 00 00 */	cmplwi r5, 0
/* 800052CC 000022CC  41 A2 00 50 */	beq+ lbl_8000531C
/* 800052D0 000022D0  80 C5 00 08 */	lwz r6, 8(r5)
/* 800052D4 000022D4  28 06 00 00 */	cmplwi r6, 0
/* 800052D8 000022D8  41 A2 00 44 */	beq+ lbl_8000531C
/* 800052DC 000022DC  7C C5 32 14 */	add r6, r5, r6
/* 800052E0 000022E0  81 C6 00 00 */	lwz r14, 0(r6)
/* 800052E4 000022E4  28 0E 00 00 */	cmplwi r14, 0
/* 800052E8 000022E8  41 82 00 34 */	beq lbl_8000531C
/* 800052EC 000022EC  39 E6 00 04 */	addi r15, r6, 4
/* 800052F0 000022F0  7D C9 03 A6 */	mtctr r14
lbl_800052F4:
/* 800052F4 000022F4  38 C6 00 04 */	addi r6, r6, 4
/* 800052F8 000022F8  80 E6 00 00 */	lwz r7, 0(r6)
/* 800052FC 000022FC  7C E7 2A 14 */	add r7, r7, r5
/* 80005300 00002300  90 E6 00 00 */	stw r7, 0(r6)
/* 80005304 00002304  42 00 FF F0 */	bdnz lbl_800052F4
/* 80005308 00002308  3C A0 80 00 */	lis r5, 0x80000034@ha
/* 8000530C 0000230C  38 A5 00 34 */	addi r5, r5, 0x80000034@l
/* 80005310 00002310  55 E7 00 34 */	rlwinm r7, r15, 0, 0, 0x1a
/* 80005314 00002314  90 E5 00 00 */	stw r7, 0(r5)
/* 80005318 00002318  48 00 00 0C */	b lbl_80005324
lbl_8000531C:
/* 8000531C 0000231C  39 C0 00 00 */	li r14, 0
/* 80005320 00002320  39 E0 00 00 */	li r15, 0
lbl_80005324:
/* 80005324 00002324  48 08 71 19 */	bl DBInit
/* 80005328 00002328  48 08 73 8D */	bl OSInit
/* 8000532C 0000232C  3C 80 80 00 */	lis r4, 0x800030E6@ha
/* 80005330 00002330  38 84 30 E6 */	addi r4, r4, 0x800030E6@l
/* 80005334 00002334  A0 64 00 00 */	lhz r3, 0(r4)
/* 80005338 00002338  70 65 80 00 */	andi. r5, r3, 0x8000
/* 8000533C 0000233C  41 82 00 10 */	beq lbl_8000534C
/* 80005340 00002340  70 63 7F FF */	andi. r3, r3, 0x7fff
/* 80005344 00002344  28 03 00 01 */	cmplwi r3, 1
/* 80005348 00002348  40 82 00 08 */	bne lbl_80005350
lbl_8000534C:
/* 8000534C 0000234C  4B FF FE A1 */	bl __check_pad3
lbl_80005350:
/* 80005350 00002350  48 08 EE CD */	bl __init_user
/* 80005354 00002354  7D C3 73 78 */	mr r3, r14
/* 80005358 00002358  7D E4 7B 78 */	mr r4, r15
/* 8000535C 0000235C  48 00 02 A5 */	bl main
/* 80005360 00002360  48 07 DF 38 */	b exit

.global __init_registers
__init_registers:
/* 80005364 00002364  3C 20 80 42 */	lis r1, 0x80424008@h
/* 80005368 00002368  60 21 40 08 */	ori r1, r1, 0x80424008@l
/* 8000536C 0000236C  3C 40 80 41 */	lis r2, _SDA2_BASE_@h
/* 80005370 00002370  60 42 34 60 */	ori r2, r2, _SDA2_BASE_@l
/* 80005374 00002374  3D A0 80 41 */	lis r13, _SDA_BASE_@h
/* 80005378 00002378  61 AD 0A C0 */	ori r13, r13, _SDA_BASE_@l
/* 8000537C 0000237C  4E 80 00 20 */	blr 

.global __init_data
__init_data:
/* 80005380 00002380  7C 08 02 A6 */	mflr r0
/* 80005384 00002384  90 01 00 04 */	stw r0, 4(r1)
/* 80005388 00002388  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 8000538C 0000238C  93 E1 00 14 */	stw r31, 0x14(r1)
/* 80005390 00002390  93 C1 00 10 */	stw r30, 0x10(r1)
/* 80005394 00002394  93 A1 00 0C */	stw r29, 0xc(r1)
/* 80005398 00002398  3C 60 80 00 */	lis r3, lbl_80005494@ha
/* 8000539C 0000239C  38 03 54 94 */	addi r0, r3, lbl_80005494@l
/* 800053A0 000023A0  7C 1D 03 78 */	mr r29, r0
/* 800053A4 000023A4  48 00 00 04 */	b lbl_800053A8
lbl_800053A8:
/* 800053A8 000023A8  48 00 00 04 */	b lbl_800053AC
lbl_800053AC:
/* 800053AC 000023AC  83 DD 00 08 */	lwz r30, 8(r29)
/* 800053B0 000023B0  28 1E 00 00 */	cmplwi r30, 0
/* 800053B4 000023B4  41 82 00 38 */	beq lbl_800053EC
/* 800053B8 000023B8  80 9D 00 00 */	lwz r4, 0(r29)
/* 800053BC 000023BC  83 FD 00 04 */	lwz r31, 4(r29)
/* 800053C0 000023C0  41 82 00 24 */	beq lbl_800053E4
/* 800053C4 000023C4  7C 1F 20 40 */	cmplw r31, r4
/* 800053C8 000023C8  41 82 00 1C */	beq lbl_800053E4
/* 800053CC 000023CC  7F E3 FB 78 */	mr r3, r31
/* 800053D0 000023D0  7F C5 F3 78 */	mr r5, r30
/* 800053D4 000023D4  4B FF DE 21 */	bl memcpy
/* 800053D8 000023D8  7F E3 FB 78 */	mr r3, r31
/* 800053DC 000023DC  7F C4 F3 78 */	mr r4, r30
/* 800053E0 000023E0  48 00 00 81 */	bl __flush_cache
lbl_800053E4:
/* 800053E4 000023E4  3B BD 00 0C */	addi r29, r29, 0xc
/* 800053E8 000023E8  4B FF FF C4 */	b lbl_800053AC
lbl_800053EC:
/* 800053EC 000023EC  3C 60 80 00 */	lis r3, lbl_80005518@ha
/* 800053F0 000023F0  38 03 55 18 */	addi r0, r3, lbl_80005518@l
/* 800053F4 000023F4  7C 1D 03 78 */	mr r29, r0
/* 800053F8 000023F8  48 00 00 04 */	b lbl_800053FC
lbl_800053FC:
/* 800053FC 000023FC  48 00 00 04 */	b lbl_80005400
lbl_80005400:
/* 80005400 00002400  80 BD 00 04 */	lwz r5, 4(r29)
/* 80005404 00002404  28 05 00 00 */	cmplwi r5, 0
/* 80005408 00002408  41 82 00 1C */	beq lbl_80005424
/* 8000540C 0000240C  80 7D 00 00 */	lwz r3, 0(r29)
/* 80005410 00002410  41 82 00 0C */	beq lbl_8000541C
/* 80005414 00002414  38 80 00 00 */	li r4, 0
/* 80005418 00002418  4B FF DC E9 */	bl memset
lbl_8000541C:
/* 8000541C 0000241C  3B BD 00 08 */	addi r29, r29, 8
/* 80005420 00002420  4B FF FF E0 */	b lbl_80005400
lbl_80005424:
/* 80005424 00002424  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 80005428 00002428  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 8000542C 0000242C  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 80005430 00002430  83 A1 00 0C */	lwz r29, 0xc(r1)
/* 80005434 00002434  38 21 00 18 */	addi r1, r1, 0x18
/* 80005438 00002438  7C 08 03 A6 */	mtlr r0
/* 8000543C 0000243C  4E 80 00 20 */	blr 
