.include "macros.inc"

.section .text, "ax"  # 0x80005600 - 0x8036FBA0

.global __CARDCompareFileName
__CARDCompareFileName:
/* 800A3B7C 000A0ABC  38 A3 00 08 */	addi r5, r3, 8
/* 800A3B80 000A0AC0  38 E0 00 20 */	li r7, 0x20
/* 800A3B84 000A0AC4  48 00 00 3C */	b lbl_800A3BC0
lbl_800A3B88:
/* 800A3B88 000A0AC8  88 05 00 00 */	lbz r0, 0(r5)
/* 800A3B8C 000A0ACC  38 A5 00 01 */	addi r5, r5, 1
/* 800A3B90 000A0AD0  88 C4 00 00 */	lbz r6, 0(r4)
/* 800A3B94 000A0AD4  38 84 00 01 */	addi r4, r4, 1
/* 800A3B98 000A0AD8  7C 03 07 74 */	extsb r3, r0
/* 800A3B9C 000A0ADC  7C C0 07 74 */	extsb r0, r6
/* 800A3BA0 000A0AE0  7C 03 00 00 */	cmpw r3, r0
/* 800A3BA4 000A0AE4  41 82 00 0C */	beq lbl_800A3BB0
/* 800A3BA8 000A0AE8  38 60 00 00 */	li r3, 0
/* 800A3BAC 000A0AEC  4E 80 00 20 */	blr 
lbl_800A3BB0:
/* 800A3BB0 000A0AF0  7C C0 07 75 */	extsb. r0, r6
/* 800A3BB4 000A0AF4  40 82 00 0C */	bne lbl_800A3BC0
/* 800A3BB8 000A0AF8  38 60 00 01 */	li r3, 1
/* 800A3BBC 000A0AFC  4E 80 00 20 */	blr 
lbl_800A3BC0:
/* 800A3BC0 000A0B00  34 E7 FF FF */	addic. r7, r7, -1
/* 800A3BC4 000A0B04  40 80 FF C4 */	bge lbl_800A3B88
/* 800A3BC8 000A0B08  88 04 00 00 */	lbz r0, 0(r4)
/* 800A3BCC 000A0B0C  7C 00 07 75 */	extsb. r0, r0
/* 800A3BD0 000A0B10  40 82 00 0C */	bne lbl_800A3BDC
/* 800A3BD4 000A0B14  38 60 00 01 */	li r3, 1
/* 800A3BD8 000A0B18  4E 80 00 20 */	blr 
lbl_800A3BDC:
/* 800A3BDC 000A0B1C  38 60 00 00 */	li r3, 0
/* 800A3BE0 000A0B20  4E 80 00 20 */	blr 

.global __CARDAccess
__CARDAccess:
/* 800A3BE4 000A0B24  7C 08 02 A6 */	mflr r0
/* 800A3BE8 000A0B28  90 01 00 04 */	stw r0, 4(r1)
/* 800A3BEC 000A0B2C  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 800A3BF0 000A0B30  93 E1 00 14 */	stw r31, 0x14(r1)
/* 800A3BF4 000A0B34  7C 9F 23 78 */	mr r31, r4
/* 800A3BF8 000A0B38  93 C1 00 10 */	stw r30, 0x10(r1)
/* 800A3BFC 000A0B3C  3B C3 00 00 */	addi r30, r3, 0
/* 800A3C00 000A0B40  88 04 00 00 */	lbz r0, 0(r4)
/* 800A3C04 000A0B44  28 00 00 FF */	cmplwi r0, 0xff
/* 800A3C08 000A0B48  40 82 00 0C */	bne lbl_800A3C14
/* 800A3C0C 000A0B4C  38 60 FF FC */	li r3, -4
/* 800A3C10 000A0B50  48 00 00 54 */	b lbl_800A3C64
lbl_800A3C14:
/* 800A3C14 000A0B54  3C 60 80 3F */	lis r3, __CARDDiskNone@ha
/* 800A3C18 000A0B58  80 9E 01 0C */	lwz r4, 0x10c(r30)
/* 800A3C1C 000A0B5C  38 03 C1 80 */	addi r0, r3, __CARDDiskNone@l
/* 800A3C20 000A0B60  7C 04 00 40 */	cmplw r4, r0
/* 800A3C24 000A0B64  41 82 00 34 */	beq lbl_800A3C58
/* 800A3C28 000A0B68  38 7F 00 00 */	addi r3, r31, 0
/* 800A3C2C 000A0B6C  38 A0 00 04 */	li r5, 4
/* 800A3C30 000A0B70  4B FD FF 95 */	bl memcmp
/* 800A3C34 000A0B74  2C 03 00 00 */	cmpwi r3, 0
/* 800A3C38 000A0B78  40 82 00 28 */	bne lbl_800A3C60
/* 800A3C3C 000A0B7C  80 9E 01 0C */	lwz r4, 0x10c(r30)
/* 800A3C40 000A0B80  38 7F 00 04 */	addi r3, r31, 4
/* 800A3C44 000A0B84  38 A0 00 02 */	li r5, 2
/* 800A3C48 000A0B88  38 84 00 04 */	addi r4, r4, 4
/* 800A3C4C 000A0B8C  4B FD FF 79 */	bl memcmp
/* 800A3C50 000A0B90  2C 03 00 00 */	cmpwi r3, 0
/* 800A3C54 000A0B94  40 82 00 0C */	bne lbl_800A3C60
lbl_800A3C58:
/* 800A3C58 000A0B98  38 60 00 00 */	li r3, 0
/* 800A3C5C 000A0B9C  48 00 00 08 */	b lbl_800A3C64
lbl_800A3C60:
/* 800A3C60 000A0BA0  38 60 FF F6 */	li r3, -10
lbl_800A3C64:
/* 800A3C64 000A0BA4  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 800A3C68 000A0BA8  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800A3C6C 000A0BAC  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 800A3C70 000A0BB0  38 21 00 18 */	addi r1, r1, 0x18
/* 800A3C74 000A0BB4  7C 08 03 A6 */	mtlr r0
/* 800A3C78 000A0BB8  4E 80 00 20 */	blr 

.global __CARDIsPublic
__CARDIsPublic:
/* 800A3C7C 000A0BBC  88 03 00 00 */	lbz r0, 0(r3)
/* 800A3C80 000A0BC0  28 00 00 FF */	cmplwi r0, 0xff
/* 800A3C84 000A0BC4  40 82 00 0C */	bne lbl_800A3C90
/* 800A3C88 000A0BC8  38 60 FF FC */	li r3, -4
/* 800A3C8C 000A0BCC  4E 80 00 20 */	blr 
lbl_800A3C90:
/* 800A3C90 000A0BD0  88 03 00 34 */	lbz r0, 0x34(r3)
/* 800A3C94 000A0BD4  54 00 07 7B */	rlwinm. r0, r0, 0, 0x1d, 0x1d
/* 800A3C98 000A0BD8  41 82 00 0C */	beq lbl_800A3CA4
/* 800A3C9C 000A0BDC  38 60 00 00 */	li r3, 0
/* 800A3CA0 000A0BE0  4E 80 00 20 */	blr 
lbl_800A3CA4:
/* 800A3CA4 000A0BE4  38 60 FF F6 */	li r3, -10
/* 800A3CA8 000A0BE8  4E 80 00 20 */	blr 

.global CARDOpen
CARDOpen:
/* 800A3CAC 000A0BEC  7C 08 02 A6 */	mflr r0
/* 800A3CB0 000A0BF0  90 01 00 04 */	stw r0, 4(r1)
/* 800A3CB4 000A0BF4  38 00 FF FF */	li r0, -1
/* 800A3CB8 000A0BF8  94 21 FF C0 */	stwu r1, -0x40(r1)
/* 800A3CBC 000A0BFC  BE E1 00 1C */	stmw r23, 0x1c(r1)
/* 800A3CC0 000A0C00  3B 84 00 00 */	addi r28, r4, 0
/* 800A3CC4 000A0C04  3B A5 00 00 */	addi r29, r5, 0
/* 800A3CC8 000A0C08  3B 63 00 00 */	addi r27, r3, 0
/* 800A3CCC 000A0C0C  38 81 00 14 */	addi r4, r1, 0x14
/* 800A3CD0 000A0C10  90 05 00 00 */	stw r0, 0(r5)
/* 800A3CD4 000A0C14  4B FF BE C1 */	bl __CARDGetControlBlock
/* 800A3CD8 000A0C18  2C 03 00 00 */	cmpwi r3, 0
/* 800A3CDC 000A0C1C  40 80 00 08 */	bge lbl_800A3CE4
/* 800A3CE0 000A0C20  48 00 01 30 */	b lbl_800A3E10
lbl_800A3CE4:
/* 800A3CE4 000A0C24  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800A3CE8 000A0C28  80 1F 00 00 */	lwz r0, 0(r31)
/* 800A3CEC 000A0C2C  2C 00 00 00 */	cmpwi r0, 0
/* 800A3CF0 000A0C30  40 82 00 0C */	bne lbl_800A3CFC
/* 800A3CF4 000A0C34  3A E0 FF FD */	li r23, -3
/* 800A3CF8 000A0C38  48 00 00 B8 */	b lbl_800A3DB0
lbl_800A3CFC:
/* 800A3CFC 000A0C3C  7F E3 FB 78 */	mr r3, r31
/* 800A3D00 000A0C40  4B FF DA 31 */	bl __CARDGetDirBlock
/* 800A3D04 000A0C44  3C 80 80 3F */	lis r4, __CARDDiskNone@ha
/* 800A3D08 000A0C48  3A E3 00 00 */	addi r23, r3, 0
/* 800A3D0C 000A0C4C  3B 44 C1 80 */	addi r26, r4, __CARDDiskNone@l
/* 800A3D10 000A0C50  3B 20 00 00 */	li r25, 0
lbl_800A3D14:
/* 800A3D14 000A0C54  88 17 00 00 */	lbz r0, 0(r23)
/* 800A3D18 000A0C58  3B 17 00 00 */	addi r24, r23, 0
/* 800A3D1C 000A0C5C  28 00 00 FF */	cmplwi r0, 0xff
/* 800A3D20 000A0C60  40 82 00 0C */	bne lbl_800A3D2C
/* 800A3D24 000A0C64  38 00 FF FC */	li r0, -4
/* 800A3D28 000A0C68  48 00 00 4C */	b lbl_800A3D74
lbl_800A3D2C:
/* 800A3D2C 000A0C6C  80 9F 01 0C */	lwz r4, 0x10c(r31)
/* 800A3D30 000A0C70  7C 04 D0 40 */	cmplw r4, r26
/* 800A3D34 000A0C74  41 82 00 34 */	beq lbl_800A3D68
/* 800A3D38 000A0C78  38 78 00 00 */	addi r3, r24, 0
/* 800A3D3C 000A0C7C  38 A0 00 04 */	li r5, 4
/* 800A3D40 000A0C80  4B FD FE 85 */	bl memcmp
/* 800A3D44 000A0C84  2C 03 00 00 */	cmpwi r3, 0
/* 800A3D48 000A0C88  40 82 00 28 */	bne lbl_800A3D70
/* 800A3D4C 000A0C8C  80 9F 01 0C */	lwz r4, 0x10c(r31)
/* 800A3D50 000A0C90  38 78 00 04 */	addi r3, r24, 4
/* 800A3D54 000A0C94  38 A0 00 02 */	li r5, 2
/* 800A3D58 000A0C98  38 84 00 04 */	addi r4, r4, 4
/* 800A3D5C 000A0C9C  4B FD FE 69 */	bl memcmp
/* 800A3D60 000A0CA0  2C 03 00 00 */	cmpwi r3, 0
/* 800A3D64 000A0CA4  40 82 00 0C */	bne lbl_800A3D70
lbl_800A3D68:
/* 800A3D68 000A0CA8  38 00 00 00 */	li r0, 0
/* 800A3D6C 000A0CAC  48 00 00 08 */	b lbl_800A3D74
lbl_800A3D70:
/* 800A3D70 000A0CB0  38 00 FF F6 */	li r0, -10
lbl_800A3D74:
/* 800A3D74 000A0CB4  2C 00 00 00 */	cmpwi r0, 0
/* 800A3D78 000A0CB8  41 80 00 24 */	blt lbl_800A3D9C
/* 800A3D7C 000A0CBC  38 77 00 00 */	addi r3, r23, 0
/* 800A3D80 000A0CC0  38 9C 00 00 */	addi r4, r28, 0
/* 800A3D84 000A0CC4  4B FF FD F9 */	bl __CARDCompareFileName
/* 800A3D88 000A0CC8  2C 03 00 00 */	cmpwi r3, 0
/* 800A3D8C 000A0CCC  41 82 00 10 */	beq lbl_800A3D9C
/* 800A3D90 000A0CD0  3B D9 00 00 */	addi r30, r25, 0
/* 800A3D94 000A0CD4  3A E0 00 00 */	li r23, 0
/* 800A3D98 000A0CD8  48 00 00 18 */	b lbl_800A3DB0
lbl_800A3D9C:
/* 800A3D9C 000A0CDC  3B 39 00 01 */	addi r25, r25, 1
/* 800A3DA0 000A0CE0  2C 19 00 7F */	cmpwi r25, 0x7f
/* 800A3DA4 000A0CE4  3A F7 00 40 */	addi r23, r23, 0x40
/* 800A3DA8 000A0CE8  41 80 FF 6C */	blt lbl_800A3D14
/* 800A3DAC 000A0CEC  3A E0 FF FC */	li r23, -4
lbl_800A3DB0:
/* 800A3DB0 000A0CF0  2C 17 00 00 */	cmpwi r23, 0
/* 800A3DB4 000A0CF4  41 80 00 50 */	blt lbl_800A3E04
/* 800A3DB8 000A0CF8  80 61 00 14 */	lwz r3, 0x14(r1)
/* 800A3DBC 000A0CFC  4B FF D9 75 */	bl __CARDGetDirBlock
/* 800A3DC0 000A0D00  57 C0 30 32 */	slwi r0, r30, 6
/* 800A3DC4 000A0D04  7C A3 02 14 */	add r5, r3, r0
/* 800A3DC8 000A0D08  A0 85 00 36 */	lhz r4, 0x36(r5)
/* 800A3DCC 000A0D0C  28 04 00 05 */	cmplwi r4, 5
/* 800A3DD0 000A0D10  41 80 00 14 */	blt lbl_800A3DE4
/* 800A3DD4 000A0D14  80 61 00 14 */	lwz r3, 0x14(r1)
/* 800A3DD8 000A0D18  A0 03 00 10 */	lhz r0, 0x10(r3)
/* 800A3DDC 000A0D1C  7C 04 00 40 */	cmplw r4, r0
/* 800A3DE0 000A0D20  41 80 00 0C */	blt lbl_800A3DEC
lbl_800A3DE4:
/* 800A3DE4 000A0D24  3A E0 FF FA */	li r23, -6
/* 800A3DE8 000A0D28  48 00 00 1C */	b lbl_800A3E04
lbl_800A3DEC:
/* 800A3DEC 000A0D2C  93 7D 00 00 */	stw r27, 0(r29)
/* 800A3DF0 000A0D30  38 00 00 00 */	li r0, 0
/* 800A3DF4 000A0D34  93 DD 00 04 */	stw r30, 4(r29)
/* 800A3DF8 000A0D38  90 1D 00 08 */	stw r0, 8(r29)
/* 800A3DFC 000A0D3C  A0 05 00 36 */	lhz r0, 0x36(r5)
/* 800A3E00 000A0D40  B0 1D 00 10 */	sth r0, 0x10(r29)
lbl_800A3E04:
/* 800A3E04 000A0D44  80 61 00 14 */	lwz r3, 0x14(r1)
/* 800A3E08 000A0D48  7E E4 BB 78 */	mr r4, r23
/* 800A3E0C 000A0D4C  4B FF BE 41 */	bl __CARDPutControlBlock
lbl_800A3E10:
/* 800A3E10 000A0D50  BA E1 00 1C */	lmw r23, 0x1c(r1)
/* 800A3E14 000A0D54  80 01 00 44 */	lwz r0, 0x44(r1)
/* 800A3E18 000A0D58  38 21 00 40 */	addi r1, r1, 0x40
/* 800A3E1C 000A0D5C  7C 08 03 A6 */	mtlr r0
/* 800A3E20 000A0D60  4E 80 00 20 */	blr 

.global CARDClose
CARDClose:
/* 800A3E24 000A0D64  7C 08 02 A6 */	mflr r0
/* 800A3E28 000A0D68  90 01 00 04 */	stw r0, 4(r1)
/* 800A3E2C 000A0D6C  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 800A3E30 000A0D70  93 E1 00 14 */	stw r31, 0x14(r1)
/* 800A3E34 000A0D74  7C 7F 1B 78 */	mr r31, r3
/* 800A3E38 000A0D78  38 81 00 0C */	addi r4, r1, 0xc
/* 800A3E3C 000A0D7C  80 63 00 00 */	lwz r3, 0(r3)
/* 800A3E40 000A0D80  4B FF BD 55 */	bl __CARDGetControlBlock
/* 800A3E44 000A0D84  2C 03 00 00 */	cmpwi r3, 0
/* 800A3E48 000A0D88  40 80 00 08 */	bge lbl_800A3E50
/* 800A3E4C 000A0D8C  48 00 00 18 */	b lbl_800A3E64
lbl_800A3E50:
/* 800A3E50 000A0D90  38 00 FF FF */	li r0, -1
/* 800A3E54 000A0D94  90 1F 00 00 */	stw r0, 0(r31)
/* 800A3E58 000A0D98  38 80 00 00 */	li r4, 0
/* 800A3E5C 000A0D9C  80 61 00 0C */	lwz r3, 0xc(r1)
/* 800A3E60 000A0DA0  4B FF BD ED */	bl __CARDPutControlBlock
lbl_800A3E64:
/* 800A3E64 000A0DA4  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 800A3E68 000A0DA8  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800A3E6C 000A0DAC  38 21 00 18 */	addi r1, r1, 0x18
/* 800A3E70 000A0DB0  7C 08 03 A6 */	mtlr r0
/* 800A3E74 000A0DB4  4E 80 00 20 */	blr 
