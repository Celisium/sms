.include "macros.inc"

.section .text, "ax"  # 0x80005600 - 0x8036FBA0

.global __ct__Q26JDrama6TVideoFv
__ct__Q26JDrama6TVideoFv:
/* 80046B80 00043AC0  7C 08 02 A6 */	mflr r0
/* 80046B84 00043AC4  90 01 00 04 */	stw r0, 4(r1)
/* 80046B88 00043AC8  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 80046B8C 00043ACC  93 E1 00 14 */	stw r31, 0x14(r1)
/* 80046B90 00043AD0  3B E3 00 00 */	addi r31, r3, 0
/* 80046B94 00043AD4  93 C1 00 10 */	stw r30, 0x10(r1)
/* 80046B98 00043AD8  3B C0 00 00 */	li r30, 0
/* 80046B9C 00043ADC  93 C3 00 78 */	stw r30, 0x78(r3)
/* 80046BA0 00043AE0  93 C3 00 7C */	stw r30, 0x7c(r3)
/* 80046BA4 00043AE4  48 04 D2 6D */	bl OSGetTick
/* 80046BA8 00043AE8  90 7F 00 80 */	stw r3, 0x80(r31)
/* 80046BAC 00043AEC  48 05 42 61 */	bl VIGetRetraceCount
/* 80046BB0 00043AF0  38 03 00 01 */	addi r0, r3, 1
/* 80046BB4 00043AF4  90 1F 00 84 */	stw r0, 0x84(r31)
/* 80046BB8 00043AF8  38 00 FF FF */	li r0, -1
/* 80046BBC 00043AFC  38 7F 00 00 */	addi r3, r31, 0
/* 80046BC0 00043B00  90 1F 00 3C */	stw r0, 0x3c(r31)
/* 80046BC4 00043B04  B3 DF 00 40 */	sth r30, 0x40(r31)
/* 80046BC8 00043B08  B3 DF 00 42 */	sth r30, 0x42(r31)
/* 80046BCC 00043B0C  B3 DF 00 44 */	sth r30, 0x44(r31)
/* 80046BD0 00043B10  B3 DF 00 46 */	sth r30, 0x46(r31)
/* 80046BD4 00043B14  B3 DF 00 48 */	sth r30, 0x48(r31)
/* 80046BD8 00043B18  B3 DF 00 4A */	sth r30, 0x4a(r31)
/* 80046BDC 00043B1C  B3 DF 00 4C */	sth r30, 0x4c(r31)
/* 80046BE0 00043B20  90 1F 00 50 */	stw r0, 0x50(r31)
/* 80046BE4 00043B24  80 9F 00 3C */	lwz r4, 0x3c(r31)
/* 80046BE8 00043B28  80 1F 00 40 */	lwz r0, 0x40(r31)
/* 80046BEC 00043B2C  90 9F 00 00 */	stw r4, 0(r31)
/* 80046BF0 00043B30  90 1F 00 04 */	stw r0, 4(r31)
/* 80046BF4 00043B34  80 9F 00 44 */	lwz r4, 0x44(r31)
/* 80046BF8 00043B38  80 1F 00 48 */	lwz r0, 0x48(r31)
/* 80046BFC 00043B3C  90 9F 00 08 */	stw r4, 8(r31)
/* 80046C00 00043B40  90 1F 00 0C */	stw r0, 0xc(r31)
/* 80046C04 00043B44  80 9F 00 4C */	lwz r4, 0x4c(r31)
/* 80046C08 00043B48  80 1F 00 50 */	lwz r0, 0x50(r31)
/* 80046C0C 00043B4C  90 9F 00 10 */	stw r4, 0x10(r31)
/* 80046C10 00043B50  90 1F 00 14 */	stw r0, 0x14(r31)
/* 80046C14 00043B54  80 9F 00 54 */	lwz r4, 0x54(r31)
/* 80046C18 00043B58  80 1F 00 58 */	lwz r0, 0x58(r31)
/* 80046C1C 00043B5C  90 9F 00 18 */	stw r4, 0x18(r31)
/* 80046C20 00043B60  90 1F 00 1C */	stw r0, 0x1c(r31)
/* 80046C24 00043B64  80 9F 00 5C */	lwz r4, 0x5c(r31)
/* 80046C28 00043B68  80 1F 00 60 */	lwz r0, 0x60(r31)
/* 80046C2C 00043B6C  90 9F 00 20 */	stw r4, 0x20(r31)
/* 80046C30 00043B70  90 1F 00 24 */	stw r0, 0x24(r31)
/* 80046C34 00043B74  80 9F 00 64 */	lwz r4, 0x64(r31)
/* 80046C38 00043B78  80 1F 00 68 */	lwz r0, 0x68(r31)
/* 80046C3C 00043B7C  90 9F 00 28 */	stw r4, 0x28(r31)
/* 80046C40 00043B80  90 1F 00 2C */	stw r0, 0x2c(r31)
/* 80046C44 00043B84  80 9F 00 6C */	lwz r4, 0x6c(r31)
/* 80046C48 00043B88  80 1F 00 70 */	lwz r0, 0x70(r31)
/* 80046C4C 00043B8C  90 9F 00 30 */	stw r4, 0x30(r31)
/* 80046C50 00043B90  90 1F 00 34 */	stw r0, 0x34(r31)
/* 80046C54 00043B94  80 1F 00 74 */	lwz r0, 0x74(r31)
/* 80046C58 00043B98  90 1F 00 38 */	stw r0, 0x38(r31)
/* 80046C5C 00043B9C  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 80046C60 00043BA0  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 80046C64 00043BA4  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 80046C68 00043BA8  38 21 00 18 */	addi r1, r1, 0x18
/* 80046C6C 00043BAC  7C 08 03 A6 */	mtlr r0
/* 80046C70 00043BB0  4E 80 00 20 */	blr 

.global setNextXFB__Q26JDrama6TVideoFPCv
setNextXFB__Q26JDrama6TVideoFPCv:
/* 80046C74 00043BB4  90 83 00 7C */	stw r4, 0x7c(r3)
/* 80046C78 00043BB8  4E 80 00 20 */	blr 

.global waitForRetrace__Q26JDrama6TVideoFUs
waitForRetrace__Q26JDrama6TVideoFUs:
/* 80046C7C 00043BBC  7C 08 02 A6 */	mflr r0
/* 80046C80 00043BC0  90 01 00 04 */	stw r0, 4(r1)
/* 80046C84 00043BC4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80046C88 00043BC8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80046C8C 00043BCC  3B E4 00 00 */	addi r31, r4, 0
/* 80046C90 00043BD0  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80046C94 00043BD4  3B C3 00 00 */	addi r30, r3, 0
/* 80046C98 00043BD8  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80046C9C 00043BDC  48 00 00 08 */	b lbl_80046CA4
lbl_80046CA0:
/* 80046CA0 00043BE0  48 05 33 05 */	bl VIWaitForRetrace
lbl_80046CA4:
/* 80046CA4 00043BE4  48 05 41 69 */	bl VIGetRetraceCount
/* 80046CA8 00043BE8  80 1E 00 84 */	lwz r0, 0x84(r30)
/* 80046CAC 00043BEC  7C 03 00 50 */	subf r0, r3, r0
/* 80046CB0 00043BF0  2C 00 00 01 */	cmpwi r0, 1
/* 80046CB4 00043BF4  41 81 FF EC */	bgt lbl_80046CA0
/* 80046CB8 00043BF8  38 7E 00 00 */	addi r3, r30, 0
/* 80046CBC 00043BFC  38 9E 00 3C */	addi r4, r30, 0x3c
/* 80046CC0 00043C00  4B FF ED D5 */	bl IsEqualRenderModeVIParams__6JDramaFRC16_GXRenderModeObjRC16_GXRenderModeObj
/* 80046CC4 00043C04  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 80046CC8 00043C08  40 82 00 80 */	bne lbl_80046D48
/* 80046CCC 00043C0C  38 7E 00 3C */	addi r3, r30, 0x3c
/* 80046CD0 00043C10  48 05 37 9D */	bl VIConfigure
/* 80046CD4 00043C14  80 7E 00 00 */	lwz r3, 0(r30)
/* 80046CD8 00043C18  80 1E 00 3C */	lwz r0, 0x3c(r30)
/* 80046CDC 00043C1C  7C 03 00 00 */	cmpw r3, r0
/* 80046CE0 00043C20  41 82 00 68 */	beq lbl_80046D48
/* 80046CE4 00043C24  38 60 00 01 */	li r3, 1
/* 80046CE8 00043C28  48 05 40 A9 */	bl VISetBlack
/* 80046CEC 00043C2C  38 00 00 00 */	li r0, 0
/* 80046CF0 00043C30  90 1E 00 78 */	stw r0, 0x78(r30)
/* 80046CF4 00043C34  48 05 3F 15 */	bl VIFlush
/* 80046CF8 00043C38  48 05 32 AD */	bl VIWaitForRetrace
/* 80046CFC 00043C3C  80 1E 00 00 */	lwz r0, 0(r30)
/* 80046D00 00043C40  54 03 07 BE */	clrlwi r3, r0, 0x1e
/* 80046D04 00043C44  2C 03 00 02 */	cmpwi r3, 2
/* 80046D08 00043C48  40 82 00 14 */	bne lbl_80046D1C
/* 80046D0C 00043C4C  80 1E 00 3C */	lwz r0, 0x3c(r30)
/* 80046D10 00043C50  54 00 07 BE */	clrlwi r0, r0, 0x1e
/* 80046D14 00043C54  2C 00 00 02 */	cmpwi r0, 2
/* 80046D18 00043C58  40 82 00 1C */	bne lbl_80046D34
lbl_80046D1C:
/* 80046D1C 00043C5C  2C 03 00 02 */	cmpwi r3, 2
/* 80046D20 00043C60  41 82 00 28 */	beq lbl_80046D48
/* 80046D24 00043C64  80 1E 00 3C */	lwz r0, 0x3c(r30)
/* 80046D28 00043C68  54 00 07 BE */	clrlwi r0, r0, 0x1e
/* 80046D2C 00043C6C  2C 00 00 02 */	cmpwi r0, 2
/* 80046D30 00043C70  40 82 00 18 */	bne lbl_80046D48
lbl_80046D34:
/* 80046D34 00043C74  3B A0 00 00 */	li r29, 0
lbl_80046D38:
/* 80046D38 00043C78  48 05 32 6D */	bl VIWaitForRetrace
/* 80046D3C 00043C7C  3B BD 00 01 */	addi r29, r29, 1
/* 80046D40 00043C80  2C 1D 00 3C */	cmpwi r29, 0x3c
/* 80046D44 00043C84  41 80 FF F4 */	blt lbl_80046D38
lbl_80046D48:
/* 80046D48 00043C88  80 1E 00 78 */	lwz r0, 0x78(r30)
/* 80046D4C 00043C8C  80 7E 00 7C */	lwz r3, 0x7c(r30)
/* 80046D50 00043C90  7C 00 18 40 */	cmplw r0, r3
/* 80046D54 00043C94  41 82 00 24 */	beq lbl_80046D78
/* 80046D58 00043C98  28 03 00 00 */	cmplwi r3, 0
/* 80046D5C 00043C9C  41 82 00 14 */	beq lbl_80046D70
/* 80046D60 00043CA0  48 05 3F C5 */	bl VISetNextFrameBuffer
/* 80046D64 00043CA4  38 60 00 00 */	li r3, 0
/* 80046D68 00043CA8  48 05 40 29 */	bl VISetBlack
/* 80046D6C 00043CAC  48 00 00 0C */	b lbl_80046D78
lbl_80046D70:
/* 80046D70 00043CB0  38 60 00 01 */	li r3, 1
/* 80046D74 00043CB4  48 05 40 1D */	bl VISetBlack
lbl_80046D78:
/* 80046D78 00043CB8  80 7E 00 3C */	lwz r3, 0x3c(r30)
/* 80046D7C 00043CBC  80 1E 00 40 */	lwz r0, 0x40(r30)
/* 80046D80 00043CC0  90 7E 00 00 */	stw r3, 0(r30)
/* 80046D84 00043CC4  90 1E 00 04 */	stw r0, 4(r30)
/* 80046D88 00043CC8  80 7E 00 44 */	lwz r3, 0x44(r30)
/* 80046D8C 00043CCC  80 1E 00 48 */	lwz r0, 0x48(r30)
/* 80046D90 00043CD0  90 7E 00 08 */	stw r3, 8(r30)
/* 80046D94 00043CD4  90 1E 00 0C */	stw r0, 0xc(r30)
/* 80046D98 00043CD8  80 7E 00 4C */	lwz r3, 0x4c(r30)
/* 80046D9C 00043CDC  80 1E 00 50 */	lwz r0, 0x50(r30)
/* 80046DA0 00043CE0  90 7E 00 10 */	stw r3, 0x10(r30)
/* 80046DA4 00043CE4  90 1E 00 14 */	stw r0, 0x14(r30)
/* 80046DA8 00043CE8  80 7E 00 54 */	lwz r3, 0x54(r30)
/* 80046DAC 00043CEC  80 1E 00 58 */	lwz r0, 0x58(r30)
/* 80046DB0 00043CF0  90 7E 00 18 */	stw r3, 0x18(r30)
/* 80046DB4 00043CF4  90 1E 00 1C */	stw r0, 0x1c(r30)
/* 80046DB8 00043CF8  80 7E 00 5C */	lwz r3, 0x5c(r30)
/* 80046DBC 00043CFC  80 1E 00 60 */	lwz r0, 0x60(r30)
/* 80046DC0 00043D00  90 7E 00 20 */	stw r3, 0x20(r30)
/* 80046DC4 00043D04  90 1E 00 24 */	stw r0, 0x24(r30)
/* 80046DC8 00043D08  80 7E 00 64 */	lwz r3, 0x64(r30)
/* 80046DCC 00043D0C  80 1E 00 68 */	lwz r0, 0x68(r30)
/* 80046DD0 00043D10  90 7E 00 28 */	stw r3, 0x28(r30)
/* 80046DD4 00043D14  90 1E 00 2C */	stw r0, 0x2c(r30)
/* 80046DD8 00043D18  80 7E 00 6C */	lwz r3, 0x6c(r30)
/* 80046DDC 00043D1C  80 1E 00 70 */	lwz r0, 0x70(r30)
/* 80046DE0 00043D20  90 7E 00 30 */	stw r3, 0x30(r30)
/* 80046DE4 00043D24  90 1E 00 34 */	stw r0, 0x34(r30)
/* 80046DE8 00043D28  80 1E 00 74 */	lwz r0, 0x74(r30)
/* 80046DEC 00043D2C  90 1E 00 38 */	stw r0, 0x38(r30)
/* 80046DF0 00043D30  80 1E 00 7C */	lwz r0, 0x7c(r30)
/* 80046DF4 00043D34  90 1E 00 78 */	stw r0, 0x78(r30)
/* 80046DF8 00043D38  48 05 3E 11 */	bl VIFlush
/* 80046DFC 00043D3C  48 05 31 A9 */	bl VIWaitForRetrace
/* 80046E00 00043D40  48 04 D0 11 */	bl OSGetTick
/* 80046E04 00043D44  90 7E 00 80 */	stw r3, 0x80(r30)
/* 80046E08 00043D48  48 05 40 05 */	bl VIGetRetraceCount
/* 80046E0C 00043D4C  57 E0 04 3E */	clrlwi r0, r31, 0x10
/* 80046E10 00043D50  7C 00 1A 14 */	add r0, r0, r3
/* 80046E14 00043D54  90 1E 00 84 */	stw r0, 0x84(r30)
/* 80046E18 00043D58  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80046E1C 00043D5C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80046E20 00043D60  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80046E24 00043D64  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80046E28 00043D68  38 21 00 20 */	addi r1, r1, 0x20
/* 80046E2C 00043D6C  7C 08 03 A6 */	mtlr r0
/* 80046E30 00043D70  4E 80 00 20 */	blr 
