.include "macros.inc"

.section .text, "ax"  # 0x80005600 - 0x8036FBA0
.global setViewport__Q26JDrama9TGraphicsFRCQ26JDrama5TRectff
setViewport__Q26JDrama9TGraphicsFRCQ26JDrama5TRectff:
/* 80043604 00040544  7C 08 02 A6 */	mflr r0
/* 80043608 00040548  90 01 00 04 */	stw r0, 4(r1)
/* 8004360C 0004054C  94 21 FF A8 */	stwu r1, -0x58(r1)
/* 80043610 00040550  DB E1 00 50 */	stfd f31, 0x50(r1)
/* 80043614 00040554  FF E0 10 90 */	fmr f31, f2
/* 80043618 00040558  DB C1 00 48 */	stfd f30, 0x48(r1)
/* 8004361C 0004055C  FF C0 08 90 */	fmr f30, f1
/* 80043620 00040560  93 E1 00 44 */	stw r31, 0x44(r1)
/* 80043624 00040564  7C 7F 1B 78 */	mr r31, r3
/* 80043628 00040568  93 C1 00 40 */	stw r30, 0x40(r1)
/* 8004362C 0004056C  93 A1 00 3C */	stw r29, 0x3c(r1)
/* 80043630 00040570  80 A4 00 00 */	lwz r5, 0(r4)
/* 80043634 00040574  80 04 00 04 */	lwz r0, 4(r4)
/* 80043638 00040578  90 A3 00 54 */	stw r5, 0x54(r3)
/* 8004363C 0004057C  90 03 00 58 */	stw r0, 0x58(r3)
/* 80043640 00040580  80 64 00 08 */	lwz r3, 8(r4)
/* 80043644 00040584  80 04 00 0C */	lwz r0, 0xc(r4)
/* 80043648 00040588  90 7F 00 5C */	stw r3, 0x5c(r31)
/* 8004364C 0004058C  90 1F 00 60 */	stw r0, 0x60(r31)
/* 80043650 00040590  88 1F 00 20 */	lbz r0, 0x20(r31)
/* 80043654 00040594  28 00 00 00 */	cmplwi r0, 0
/* 80043658 00040598  41 82 00 90 */	beq lbl_800436E8
/* 8004365C 0004059C  80 BF 00 58 */	lwz r5, 0x58(r31)
/* 80043660 000405A0  80 9F 00 60 */	lwz r4, 0x60(r31)
/* 80043664 000405A4  80 7F 00 54 */	lwz r3, 0x54(r31)
/* 80043668 000405A8  80 1F 00 5C */	lwz r0, 0x5c(r31)
/* 8004366C 000405AC  7F C5 20 50 */	subf r30, r5, r4
/* 80043670 000405B0  7F A3 00 50 */	subf r29, r3, r0
/* 80043674 000405B4  48 05 78 09 */	bl VIGetNextField
/* 80043678 000405B8  80 BF 00 58 */	lwz r5, 0x58(r31)
/* 8004367C 000405BC  6F A4 80 00 */	xoris r4, r29, 0x8000
/* 80043680 000405C0  80 DF 00 54 */	lwz r6, 0x54(r31)
/* 80043684 000405C4  6F C0 80 00 */	xoris r0, r30, 0x8000
/* 80043688 000405C8  6C A5 80 00 */	xoris r5, r5, 0x8000
/* 8004368C 000405CC  6C C6 80 00 */	xoris r6, r6, 0x8000
/* 80043690 000405D0  90 A1 00 2C */	stw r5, 0x2c(r1)
/* 80043694 000405D4  C8 82 83 A8 */	lfd f4, $$2473-_SDA2_BASE_(r2)
/* 80043698 000405D8  FC A0 F0 90 */	fmr f5, f30
/* 8004369C 000405DC  90 C1 00 34 */	stw r6, 0x34(r1)
/* 800436A0 000405E0  3C C0 43 30 */	lis r6, 0x4330
/* 800436A4 000405E4  FC C0 F8 90 */	fmr f6, f31
/* 800436A8 000405E8  90 81 00 24 */	stw r4, 0x24(r1)
/* 800436AC 000405EC  90 01 00 1C */	stw r0, 0x1c(r1)
/* 800436B0 000405F0  90 C1 00 28 */	stw r6, 0x28(r1)
/* 800436B4 000405F4  90 C1 00 30 */	stw r6, 0x30(r1)
/* 800436B8 000405F8  C8 01 00 28 */	lfd f0, 0x28(r1)
/* 800436BC 000405FC  90 C1 00 20 */	stw r6, 0x20(r1)
/* 800436C0 00040600  C8 21 00 30 */	lfd f1, 0x30(r1)
/* 800436C4 00040604  EC 40 20 28 */	fsubs f2, f0, f4
/* 800436C8 00040608  90 C1 00 18 */	stw r6, 0x18(r1)
/* 800436CC 0004060C  C8 61 00 20 */	lfd f3, 0x20(r1)
/* 800436D0 00040610  EC 21 20 28 */	fsubs f1, f1, f4
/* 800436D4 00040614  C8 01 00 18 */	lfd f0, 0x18(r1)
/* 800436D8 00040618  EC 63 20 28 */	fsubs f3, f3, f4
/* 800436DC 0004061C  EC 80 20 28 */	fsubs f4, f0, f4
/* 800436E0 00040620  48 06 A1 ED */	bl GXSetViewportJitter
/* 800436E4 00040624  48 00 00 80 */	b lbl_80043764
lbl_800436E8:
/* 800436E8 00040628  80 DF 00 58 */	lwz r6, 0x58(r31)
/* 800436EC 0004062C  3C 80 43 30 */	lis r4, 0x4330
/* 800436F0 00040630  80 1F 00 60 */	lwz r0, 0x60(r31)
/* 800436F4 00040634  FC A0 F0 90 */	fmr f5, f30
/* 800436F8 00040638  80 FF 00 54 */	lwz r7, 0x54(r31)
/* 800436FC 0004063C  80 7F 00 5C */	lwz r3, 0x5c(r31)
/* 80043700 00040640  7C A6 00 50 */	subf r5, r6, r0
/* 80043704 00040644  6C E0 80 00 */	xoris r0, r7, 0x8000
/* 80043708 00040648  7C 67 18 50 */	subf r3, r7, r3
/* 8004370C 0004064C  90 01 00 1C */	stw r0, 0x1c(r1)
/* 80043710 00040650  6C C0 80 00 */	xoris r0, r6, 0x8000
/* 80043714 00040654  C8 82 83 A8 */	lfd f4, $$2473-_SDA2_BASE_(r2)
/* 80043718 00040658  6C 63 80 00 */	xoris r3, r3, 0x8000
/* 8004371C 0004065C  90 01 00 24 */	stw r0, 0x24(r1)
/* 80043720 00040660  6C A0 80 00 */	xoris r0, r5, 0x8000
/* 80043724 00040664  FC C0 F8 90 */	fmr f6, f31
/* 80043728 00040668  90 61 00 2C */	stw r3, 0x2c(r1)
/* 8004372C 0004066C  90 01 00 34 */	stw r0, 0x34(r1)
/* 80043730 00040670  90 81 00 18 */	stw r4, 0x18(r1)
/* 80043734 00040674  90 81 00 20 */	stw r4, 0x20(r1)
/* 80043738 00040678  C8 21 00 18 */	lfd f1, 0x18(r1)
/* 8004373C 0004067C  90 81 00 28 */	stw r4, 0x28(r1)
/* 80043740 00040680  C8 01 00 20 */	lfd f0, 0x20(r1)
/* 80043744 00040684  EC 21 20 28 */	fsubs f1, f1, f4
/* 80043748 00040688  90 81 00 30 */	stw r4, 0x30(r1)
/* 8004374C 0004068C  C8 61 00 28 */	lfd f3, 0x28(r1)
/* 80043750 00040690  EC 40 20 28 */	fsubs f2, f0, f4
/* 80043754 00040694  C8 01 00 30 */	lfd f0, 0x30(r1)
/* 80043758 00040698  EC 63 20 28 */	fsubs f3, f3, f4
/* 8004375C 0004069C  EC 80 20 28 */	fsubs f4, f0, f4
/* 80043760 000406A0  48 06 A2 89 */	bl GXSetViewport
lbl_80043764:
/* 80043764 000406A4  80 01 00 5C */	lwz r0, 0x5c(r1)
/* 80043768 000406A8  CB E1 00 50 */	lfd f31, 0x50(r1)
/* 8004376C 000406AC  CB C1 00 48 */	lfd f30, 0x48(r1)
/* 80043770 000406B0  7C 08 03 A6 */	mtlr r0
/* 80043774 000406B4  83 E1 00 44 */	lwz r31, 0x44(r1)
/* 80043778 000406B8  83 C1 00 40 */	lwz r30, 0x40(r1)
/* 8004377C 000406BC  83 A1 00 3C */	lwz r29, 0x3c(r1)
/* 80043780 000406C0  38 21 00 58 */	addi r1, r1, 0x58
/* 80043784 000406C4  4E 80 00 20 */	blr 

.section .sdata2, "wa"  # 0x8040B460 - 0x80414020
$$2473:
	.incbin "baserom.dol", 0x3E40A8, 0x8
