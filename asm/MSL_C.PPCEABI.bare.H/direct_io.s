.include "macros.inc"

.section .text, "ax"  # 0x80005600 - 0x8036FBA0

.global fwrite
fwrite:
/* 800838AC 000807EC  7C 08 02 A6 */	mflr r0
/* 800838B0 000807F0  90 01 00 04 */	stw r0, 4(r1)
/* 800838B4 000807F4  94 21 FF B8 */	stwu r1, -0x48(r1)
/* 800838B8 000807F8  BF 21 00 2C */	stmw r25, 0x2c(r1)
/* 800838BC 000807FC  3B 44 00 00 */	addi r26, r4, 0
/* 800838C0 00080800  3B 66 00 00 */	addi r27, r6, 0
/* 800838C4 00080804  3B 83 00 00 */	addi r28, r3, 0
/* 800838C8 00080808  3B 25 00 00 */	addi r25, r5, 0
/* 800838CC 0008080C  38 7B 00 00 */	addi r3, r27, 0
/* 800838D0 00080810  38 80 00 00 */	li r4, 0
/* 800838D4 00080814  48 00 2C 55 */	bl fwide
/* 800838D8 00080818  2C 03 00 00 */	cmpwi r3, 0
/* 800838DC 0008081C  40 82 00 10 */	bne lbl_800838EC
/* 800838E0 00080820  38 7B 00 00 */	addi r3, r27, 0
/* 800838E4 00080824  38 80 FF FF */	li r4, -1
/* 800838E8 00080828  48 00 2C 41 */	bl fwide
lbl_800838EC:
/* 800838EC 0008082C  7C 1A C9 D7 */	mullw. r0, r26, r25
/* 800838F0 00080830  7C 1D 03 78 */	mr r29, r0
/* 800838F4 00080834  41 82 00 1C */	beq lbl_80083910
/* 800838F8 00080838  88 1B 00 0A */	lbz r0, 0xa(r27)
/* 800838FC 0008083C  28 00 00 00 */	cmplwi r0, 0
/* 80083900 00080840  40 82 00 10 */	bne lbl_80083910
/* 80083904 00080844  A0 1B 00 04 */	lhz r0, 4(r27)
/* 80083908 00080848  54 00 D7 7F */	rlwinm. r0, r0, 0x1a, 0x1d, 0x1f
/* 8008390C 0008084C  40 82 00 0C */	bne lbl_80083918
lbl_80083910:
/* 80083910 00080850  38 60 00 00 */	li r3, 0
/* 80083914 00080854  48 00 02 60 */	b lbl_80083B74
lbl_80083918:
/* 80083918 00080858  2C 00 00 02 */	cmpwi r0, 2
/* 8008391C 0008085C  40 82 00 08 */	bne lbl_80083924
/* 80083920 00080860  48 00 06 CD */	bl __stdio_atexit
lbl_80083924:
/* 80083924 00080864  88 1B 00 05 */	lbz r0, 5(r27)
/* 80083928 00080868  3B E0 00 01 */	li r31, 1
/* 8008392C 0008086C  38 7F 00 00 */	addi r3, r31, 0
/* 80083930 00080870  54 00 EF FF */	rlwinm. r0, r0, 0x1d, 0x1f, 0x1f
/* 80083934 00080874  38 9F 00 00 */	addi r4, r31, 0
/* 80083938 00080878  41 82 00 18 */	beq lbl_80083950
/* 8008393C 0008087C  A0 1B 00 04 */	lhz r0, 4(r27)
/* 80083940 00080880  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 80083944 00080884  2C 00 00 03 */	cmpwi r0, 3
/* 80083948 00080888  41 82 00 08 */	beq lbl_80083950
/* 8008394C 0008088C  38 80 00 00 */	li r4, 0
lbl_80083950:
/* 80083950 00080890  2C 04 00 00 */	cmpwi r4, 0
/* 80083954 00080894  40 82 00 18 */	bne lbl_8008396C
/* 80083958 00080898  88 1B 00 04 */	lbz r0, 4(r27)
/* 8008395C 0008089C  54 00 FF BE */	rlwinm r0, r0, 0x1f, 0x1e, 0x1f
/* 80083960 000808A0  28 00 00 02 */	cmplwi r0, 2
/* 80083964 000808A4  41 82 00 08 */	beq lbl_8008396C
/* 80083968 000808A8  38 60 00 00 */	li r3, 0
lbl_8008396C:
/* 8008396C 000808AC  2C 03 00 00 */	cmpwi r3, 0
/* 80083970 000808B0  40 82 00 18 */	bne lbl_80083988
/* 80083974 000808B4  88 1B 00 04 */	lbz r0, 4(r27)
/* 80083978 000808B8  54 00 FF BE */	rlwinm r0, r0, 0x1f, 0x1e, 0x1f
/* 8008397C 000808BC  28 00 00 01 */	cmplwi r0, 1
/* 80083980 000808C0  41 82 00 08 */	beq lbl_80083988
/* 80083984 000808C4  3B E0 00 00 */	li r31, 0
lbl_80083988:
/* 80083988 000808C8  88 7B 00 08 */	lbz r3, 8(r27)
/* 8008398C 000808CC  54 60 DF 7F */	rlwinm. r0, r3, 0x1b, 0x1d, 0x1f
/* 80083990 000808D0  40 82 00 24 */	bne lbl_800839B4
/* 80083994 000808D4  88 1B 00 04 */	lbz r0, 4(r27)
/* 80083998 000808D8  54 00 EF BD */	rlwinm. r0, r0, 0x1d, 0x1e, 0x1e
/* 8008399C 000808DC  41 82 00 18 */	beq lbl_800839B4
/* 800839A0 000808E0  38 00 00 01 */	li r0, 1
/* 800839A4 000808E4  50 03 2E 34 */	rlwimi r3, r0, 5, 0x18, 0x1a
/* 800839A8 000808E8  98 7B 00 08 */	stb r3, 8(r27)
/* 800839AC 000808EC  7F 63 DB 78 */	mr r3, r27
/* 800839B0 000808F0  4B FF FE 75 */	bl __prep_buffer
lbl_800839B4:
/* 800839B4 000808F4  88 1B 00 08 */	lbz r0, 8(r27)
/* 800839B8 000808F8  54 00 DF 7E */	rlwinm r0, r0, 0x1b, 0x1d, 0x1f
/* 800839BC 000808FC  28 00 00 01 */	cmplwi r0, 1
/* 800839C0 00080900  41 82 00 1C */	beq lbl_800839DC
/* 800839C4 00080904  38 00 00 01 */	li r0, 1
/* 800839C8 00080908  98 1B 00 0A */	stb r0, 0xa(r27)
/* 800839CC 0008090C  38 00 00 00 */	li r0, 0
/* 800839D0 00080910  38 60 00 00 */	li r3, 0
/* 800839D4 00080914  90 1B 00 24 */	stw r0, 0x24(r27)
/* 800839D8 00080918  48 00 01 9C */	b lbl_80083B74
lbl_800839DC:
/* 800839DC 0008091C  28 1D 00 00 */	cmplwi r29, 0
/* 800839E0 00080920  3B DC 00 00 */	addi r30, r28, 0
/* 800839E4 00080924  3B 80 00 00 */	li r28, 0
/* 800839E8 00080928  41 82 00 FC */	beq lbl_80083AE4
/* 800839EC 0008092C  80 9B 00 20 */	lwz r4, 0x20(r27)
/* 800839F0 00080930  80 7B 00 18 */	lwz r3, 0x18(r27)
/* 800839F4 00080934  7C 04 18 40 */	cmplw r4, r3
/* 800839F8 00080938  40 82 00 0C */	bne lbl_80083A04
/* 800839FC 0008093C  2C 1F 00 00 */	cmpwi r31, 0
/* 80083A00 00080940  41 82 00 E4 */	beq lbl_80083AE4
lbl_80083A04:
/* 80083A04 00080944  80 1B 00 1C */	lwz r0, 0x1c(r27)
/* 80083A08 00080948  7C 63 20 50 */	subf r3, r3, r4
/* 80083A0C 0008094C  7C 03 00 50 */	subf r0, r3, r0
/* 80083A10 00080950  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80083A14:
/* 80083A14 00080954  80 1B 00 24 */	lwz r0, 0x24(r27)
/* 80083A18 00080958  90 01 00 20 */	stw r0, 0x20(r1)
/* 80083A1C 0008095C  80 01 00 20 */	lwz r0, 0x20(r1)
/* 80083A20 00080960  7C 00 E8 40 */	cmplw r0, r29
/* 80083A24 00080964  40 81 00 08 */	ble lbl_80083A2C
/* 80083A28 00080968  93 A1 00 20 */	stw r29, 0x20(r1)
lbl_80083A2C:
/* 80083A2C 0008096C  80 A1 00 20 */	lwz r5, 0x20(r1)
/* 80083A30 00080970  28 05 00 00 */	cmplwi r5, 0
/* 80083A34 00080974  41 82 00 3C */	beq lbl_80083A70
/* 80083A38 00080978  80 7B 00 20 */	lwz r3, 0x20(r27)
/* 80083A3C 0008097C  7F C4 F3 78 */	mr r4, r30
/* 80083A40 00080980  4B F7 F7 B5 */	bl memcpy
/* 80083A44 00080984  80 61 00 20 */	lwz r3, 0x20(r1)
/* 80083A48 00080988  80 1B 00 20 */	lwz r0, 0x20(r27)
/* 80083A4C 0008098C  7F DE 1A 14 */	add r30, r30, r3
/* 80083A50 00080990  7C 00 1A 14 */	add r0, r0, r3
/* 80083A54 00080994  90 1B 00 20 */	stw r0, 0x20(r27)
/* 80083A58 00080998  7F 9C 1A 14 */	add r28, r28, r3
/* 80083A5C 0008099C  7F A3 E8 50 */	subf r29, r3, r29
/* 80083A60 000809A0  80 61 00 20 */	lwz r3, 0x20(r1)
/* 80083A64 000809A4  80 1B 00 24 */	lwz r0, 0x24(r27)
/* 80083A68 000809A8  7C 03 00 50 */	subf r0, r3, r0
/* 80083A6C 000809AC  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80083A70:
/* 80083A70 000809B0  80 7B 00 24 */	lwz r3, 0x24(r27)
/* 80083A74 000809B4  28 03 00 00 */	cmplwi r3, 0
/* 80083A78 000809B8  40 82 00 1C */	bne lbl_80083A94
/* 80083A7C 000809BC  A0 1B 00 04 */	lhz r0, 4(r27)
/* 80083A80 000809C0  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 80083A84 000809C4  2C 00 00 03 */	cmpwi r0, 3
/* 80083A88 000809C8  40 82 00 0C */	bne lbl_80083A94
/* 80083A8C 000809CC  7F 9C EA 14 */	add r28, r28, r29
/* 80083A90 000809D0  48 00 00 54 */	b lbl_80083AE4
lbl_80083A94:
/* 80083A94 000809D4  28 03 00 00 */	cmplwi r3, 0
/* 80083A98 000809D8  41 82 00 10 */	beq lbl_80083AA8
/* 80083A9C 000809DC  88 1B 00 04 */	lbz r0, 4(r27)
/* 80083AA0 000809E0  54 00 FF BF */	rlwinm. r0, r0, 0x1f, 0x1e, 0x1f
/* 80083AA4 000809E4  40 82 00 30 */	bne lbl_80083AD4
lbl_80083AA8:
/* 80083AA8 000809E8  38 7B 00 00 */	addi r3, r27, 0
/* 80083AAC 000809EC  38 80 00 00 */	li r4, 0
/* 80083AB0 000809F0  4B FF FC A9 */	bl __flush_buffer
/* 80083AB4 000809F4  2C 03 00 00 */	cmpwi r3, 0
/* 80083AB8 000809F8  41 82 00 1C */	beq lbl_80083AD4
/* 80083ABC 000809FC  38 00 00 01 */	li r0, 1
/* 80083AC0 00080A00  98 1B 00 0A */	stb r0, 0xa(r27)
/* 80083AC4 00080A04  38 00 00 00 */	li r0, 0
/* 80083AC8 00080A08  3B A0 00 00 */	li r29, 0
/* 80083ACC 00080A0C  90 1B 00 24 */	stw r0, 0x24(r27)
/* 80083AD0 00080A10  48 00 00 14 */	b lbl_80083AE4
lbl_80083AD4:
/* 80083AD4 00080A14  28 1D 00 00 */	cmplwi r29, 0
/* 80083AD8 00080A18  41 82 00 0C */	beq lbl_80083AE4
/* 80083ADC 00080A1C  2C 1F 00 00 */	cmpwi r31, 0
/* 80083AE0 00080A20  40 82 FF 34 */	bne lbl_80083A14
lbl_80083AE4:
/* 80083AE4 00080A24  28 1D 00 00 */	cmplwi r29, 0
/* 80083AE8 00080A28  41 82 00 68 */	beq lbl_80083B50
/* 80083AEC 00080A2C  2C 1F 00 00 */	cmpwi r31, 0
/* 80083AF0 00080A30  40 82 00 60 */	bne lbl_80083B50
/* 80083AF4 00080A34  83 FB 00 18 */	lwz r31, 0x18(r27)
/* 80083AF8 00080A38  7C 1E EA 14 */	add r0, r30, r29
/* 80083AFC 00080A3C  83 3B 00 1C */	lwz r25, 0x1c(r27)
/* 80083B00 00080A40  38 7B 00 00 */	addi r3, r27, 0
/* 80083B04 00080A44  38 81 00 20 */	addi r4, r1, 0x20
/* 80083B08 00080A48  93 DB 00 18 */	stw r30, 0x18(r27)
/* 80083B0C 00080A4C  93 BB 00 1C */	stw r29, 0x1c(r27)
/* 80083B10 00080A50  90 1B 00 20 */	stw r0, 0x20(r27)
/* 80083B14 00080A54  4B FF FC 45 */	bl __flush_buffer
/* 80083B18 00080A58  2C 03 00 00 */	cmpwi r3, 0
/* 80083B1C 00080A5C  41 82 00 14 */	beq lbl_80083B30
/* 80083B20 00080A60  38 00 00 01 */	li r0, 1
/* 80083B24 00080A64  98 1B 00 0A */	stb r0, 0xa(r27)
/* 80083B28 00080A68  38 00 00 00 */	li r0, 0
/* 80083B2C 00080A6C  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80083B30:
/* 80083B30 00080A70  80 01 00 20 */	lwz r0, 0x20(r1)
/* 80083B34 00080A74  7F 63 DB 78 */	mr r3, r27
/* 80083B38 00080A78  93 FB 00 18 */	stw r31, 0x18(r27)
/* 80083B3C 00080A7C  7F 9C 02 14 */	add r28, r28, r0
/* 80083B40 00080A80  93 3B 00 1C */	stw r25, 0x1c(r27)
/* 80083B44 00080A84  4B FF FC E1 */	bl __prep_buffer
/* 80083B48 00080A88  38 00 00 00 */	li r0, 0
/* 80083B4C 00080A8C  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80083B50:
/* 80083B50 00080A90  88 1B 00 04 */	lbz r0, 4(r27)
/* 80083B54 00080A94  54 00 FF BE */	rlwinm r0, r0, 0x1f, 0x1e, 0x1f
/* 80083B58 00080A98  28 00 00 02 */	cmplwi r0, 2
/* 80083B5C 00080A9C  41 82 00 0C */	beq lbl_80083B68
/* 80083B60 00080AA0  38 00 00 00 */	li r0, 0
/* 80083B64 00080AA4  90 1B 00 24 */	stw r0, 0x24(r27)
lbl_80083B68:
/* 80083B68 00080AA8  38 1A FF FF */	addi r0, r26, -1
/* 80083B6C 00080AAC  7C 1C 02 14 */	add r0, r28, r0
/* 80083B70 00080AB0  7C 60 D3 96 */	divwu r3, r0, r26
lbl_80083B74:
/* 80083B74 00080AB4  BB 21 00 2C */	lmw r25, 0x2c(r1)
/* 80083B78 00080AB8  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 80083B7C 00080ABC  38 21 00 48 */	addi r1, r1, 0x48
/* 80083B80 00080AC0  7C 08 03 A6 */	mtlr r0
/* 80083B84 00080AC4  4E 80 00 20 */	blr 
