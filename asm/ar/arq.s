.include "macros.inc"

.section .text, "ax"  # 0x80005600 - 0x8036FBA0

.global __ARQServiceQueueLo
__ARQServiceQueueLo:
/* 8009E2C4 0009B204  7C 08 02 A6 */	mflr r0
/* 8009E2C8 0009B208  90 01 00 04 */	stw r0, 4(r1)
/* 8009E2CC 0009B20C  94 21 FF F8 */	stwu r1, -8(r1)
/* 8009E2D0 0009B210  80 0D 95 2C */	lwz r0, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E2D4 0009B214  28 00 00 00 */	cmplwi r0, 0
/* 8009E2D8 0009B218  40 82 00 1C */	bne lbl_8009E2F4
/* 8009E2DC 0009B21C  80 6D 95 20 */	lwz r3, __ARQRequestQueueLo-_SDA_BASE_(r13)
/* 8009E2E0 0009B220  28 03 00 00 */	cmplwi r3, 0
/* 8009E2E4 0009B224  41 82 00 10 */	beq lbl_8009E2F4
/* 8009E2E8 0009B228  90 6D 95 2C */	stw r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E2EC 0009B22C  80 03 00 00 */	lwz r0, 0(r3)
/* 8009E2F0 0009B230  90 0D 95 20 */	stw r0, __ARQRequestQueueLo-_SDA_BASE_(r13)
lbl_8009E2F4:
/* 8009E2F4 0009B234  80 AD 95 2C */	lwz r5, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E2F8 0009B238  28 05 00 00 */	cmplwi r5, 0
/* 8009E2FC 0009B23C  41 82 00 B8 */	beq lbl_8009E3B4
/* 8009E300 0009B240  80 C5 00 18 */	lwz r6, 0x18(r5)
/* 8009E304 0009B244  80 0D 95 38 */	lwz r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8009E308 0009B248  7C 06 00 40 */	cmplw r6, r0
/* 8009E30C 0009B24C  41 81 00 3C */	bgt lbl_8009E348
/* 8009E310 0009B250  80 65 00 08 */	lwz r3, 8(r5)
/* 8009E314 0009B254  28 03 00 00 */	cmplwi r3, 0
/* 8009E318 0009B258  40 82 00 14 */	bne lbl_8009E32C
/* 8009E31C 0009B25C  80 85 00 10 */	lwz r4, 0x10(r5)
/* 8009E320 0009B260  80 A5 00 14 */	lwz r5, 0x14(r5)
/* 8009E324 0009B264  4B FF F3 F1 */	bl ARStartDMA
/* 8009E328 0009B268  48 00 00 10 */	b lbl_8009E338
lbl_8009E32C:
/* 8009E32C 0009B26C  80 85 00 14 */	lwz r4, 0x14(r5)
/* 8009E330 0009B270  80 A5 00 10 */	lwz r5, 0x10(r5)
/* 8009E334 0009B274  4B FF F3 E1 */	bl ARStartDMA
lbl_8009E338:
/* 8009E338 0009B278  80 6D 95 2C */	lwz r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E33C 0009B27C  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 8009E340 0009B280  90 0D 95 34 */	stw r0, __ARQCallbackLo-_SDA_BASE_(r13)
/* 8009E344 0009B284  48 00 00 34 */	b lbl_8009E378
lbl_8009E348:
/* 8009E348 0009B288  80 65 00 08 */	lwz r3, 8(r5)
/* 8009E34C 0009B28C  28 03 00 00 */	cmplwi r3, 0
/* 8009E350 0009B290  40 82 00 18 */	bne lbl_8009E368
/* 8009E354 0009B294  80 85 00 10 */	lwz r4, 0x10(r5)
/* 8009E358 0009B298  7C 06 03 78 */	mr r6, r0
/* 8009E35C 0009B29C  80 A5 00 14 */	lwz r5, 0x14(r5)
/* 8009E360 0009B2A0  4B FF F3 B5 */	bl ARStartDMA
/* 8009E364 0009B2A4  48 00 00 14 */	b lbl_8009E378
lbl_8009E368:
/* 8009E368 0009B2A8  80 85 00 14 */	lwz r4, 0x14(r5)
/* 8009E36C 0009B2AC  7C 06 03 78 */	mr r6, r0
/* 8009E370 0009B2B0  80 A5 00 10 */	lwz r5, 0x10(r5)
/* 8009E374 0009B2B4  4B FF F3 A1 */	bl ARStartDMA
lbl_8009E378:
/* 8009E378 0009B2B8  80 6D 95 2C */	lwz r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E37C 0009B2BC  80 8D 95 38 */	lwz r4, __ARQChunkSize-_SDA_BASE_(r13)
/* 8009E380 0009B2C0  80 03 00 18 */	lwz r0, 0x18(r3)
/* 8009E384 0009B2C4  7C 04 00 50 */	subf r0, r4, r0
/* 8009E388 0009B2C8  90 03 00 18 */	stw r0, 0x18(r3)
/* 8009E38C 0009B2CC  80 8D 95 2C */	lwz r4, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E390 0009B2D0  80 0D 95 38 */	lwz r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8009E394 0009B2D4  80 64 00 10 */	lwz r3, 0x10(r4)
/* 8009E398 0009B2D8  7C 03 02 14 */	add r0, r3, r0
/* 8009E39C 0009B2DC  90 04 00 10 */	stw r0, 0x10(r4)
/* 8009E3A0 0009B2E0  80 8D 95 2C */	lwz r4, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E3A4 0009B2E4  80 0D 95 38 */	lwz r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8009E3A8 0009B2E8  80 64 00 14 */	lwz r3, 0x14(r4)
/* 8009E3AC 0009B2EC  7C 03 02 14 */	add r0, r3, r0
/* 8009E3B0 0009B2F0  90 04 00 14 */	stw r0, 0x14(r4)
lbl_8009E3B4:
/* 8009E3B4 0009B2F4  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8009E3B8 0009B2F8  38 21 00 08 */	addi r1, r1, 8
/* 8009E3BC 0009B2FC  7C 08 03 A6 */	mtlr r0
/* 8009E3C0 0009B300  4E 80 00 20 */	blr 

.global __ARQCallbackHack
__ARQCallbackHack:
/* 8009E3C4 0009B304  4E 80 00 20 */	blr 

.global __ARQInterruptServiceRoutine
__ARQInterruptServiceRoutine:
/* 8009E3C8 0009B308  7C 08 02 A6 */	mflr r0
/* 8009E3CC 0009B30C  90 01 00 04 */	stw r0, 4(r1)
/* 8009E3D0 0009B310  94 21 FF F8 */	stwu r1, -8(r1)
/* 8009E3D4 0009B314  81 8D 95 30 */	lwz r12, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8009E3D8 0009B318  28 0C 00 00 */	cmplwi r12, 0
/* 8009E3DC 0009B31C  41 82 00 20 */	beq lbl_8009E3FC
/* 8009E3E0 0009B320  80 6D 95 28 */	lwz r3, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E3E4 0009B324  7D 88 03 A6 */	mtlr r12
/* 8009E3E8 0009B328  4E 80 00 21 */	blrl 
/* 8009E3EC 0009B32C  38 00 00 00 */	li r0, 0
/* 8009E3F0 0009B330  90 0D 95 28 */	stw r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E3F4 0009B334  90 0D 95 30 */	stw r0, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8009E3F8 0009B338  48 00 00 28 */	b lbl_8009E420
lbl_8009E3FC:
/* 8009E3FC 0009B33C  81 8D 95 34 */	lwz r12, __ARQCallbackLo-_SDA_BASE_(r13)
/* 8009E400 0009B340  28 0C 00 00 */	cmplwi r12, 0
/* 8009E404 0009B344  41 82 00 1C */	beq lbl_8009E420
/* 8009E408 0009B348  80 6D 95 2C */	lwz r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E40C 0009B34C  7D 88 03 A6 */	mtlr r12
/* 8009E410 0009B350  4E 80 00 21 */	blrl 
/* 8009E414 0009B354  38 00 00 00 */	li r0, 0
/* 8009E418 0009B358  90 0D 95 2C */	stw r0, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E41C 0009B35C  90 0D 95 34 */	stw r0, __ARQCallbackLo-_SDA_BASE_(r13)
lbl_8009E420:
/* 8009E420 0009B360  80 CD 95 18 */	lwz r6, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8009E424 0009B364  28 06 00 00 */	cmplwi r6, 0
/* 8009E428 0009B368  41 82 00 4C */	beq lbl_8009E474
/* 8009E42C 0009B36C  80 66 00 08 */	lwz r3, 8(r6)
/* 8009E430 0009B370  28 03 00 00 */	cmplwi r3, 0
/* 8009E434 0009B374  40 82 00 18 */	bne lbl_8009E44C
/* 8009E438 0009B378  80 86 00 10 */	lwz r4, 0x10(r6)
/* 8009E43C 0009B37C  80 A6 00 14 */	lwz r5, 0x14(r6)
/* 8009E440 0009B380  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8009E444 0009B384  4B FF F2 D1 */	bl ARStartDMA
/* 8009E448 0009B388  48 00 00 14 */	b lbl_8009E45C
lbl_8009E44C:
/* 8009E44C 0009B38C  80 86 00 14 */	lwz r4, 0x14(r6)
/* 8009E450 0009B390  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 8009E454 0009B394  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8009E458 0009B398  4B FF F2 BD */	bl ARStartDMA
lbl_8009E45C:
/* 8009E45C 0009B39C  80 6D 95 18 */	lwz r3, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8009E460 0009B3A0  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 8009E464 0009B3A4  90 0D 95 30 */	stw r0, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8009E468 0009B3A8  90 6D 95 28 */	stw r3, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E46C 0009B3AC  80 03 00 00 */	lwz r0, 0(r3)
/* 8009E470 0009B3B0  90 0D 95 18 */	stw r0, __ARQRequestQueueHi-_SDA_BASE_(r13)
lbl_8009E474:
/* 8009E474 0009B3B4  80 0D 95 28 */	lwz r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E478 0009B3B8  28 00 00 00 */	cmplwi r0, 0
/* 8009E47C 0009B3BC  40 82 00 08 */	bne lbl_8009E484
/* 8009E480 0009B3C0  4B FF FE 45 */	bl __ARQServiceQueueLo
lbl_8009E484:
/* 8009E484 0009B3C4  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8009E488 0009B3C8  38 21 00 08 */	addi r1, r1, 8
/* 8009E48C 0009B3CC  7C 08 03 A6 */	mtlr r0
/* 8009E490 0009B3D0  4E 80 00 20 */	blr 

.global ARQInit
ARQInit:
/* 8009E494 0009B3D4  7C 08 02 A6 */	mflr r0
/* 8009E498 0009B3D8  90 01 00 04 */	stw r0, 4(r1)
/* 8009E49C 0009B3DC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8009E4A0 0009B3E0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8009E4A4 0009B3E4  80 0D 95 3C */	lwz r0, __ARQ_init_flag-_SDA_BASE_(r13)
/* 8009E4A8 0009B3E8  2C 00 00 01 */	cmpwi r0, 1
/* 8009E4AC 0009B3EC  41 82 00 3C */	beq lbl_8009E4E8
/* 8009E4B0 0009B3F0  3B E0 00 00 */	li r31, 0
/* 8009E4B4 0009B3F4  38 00 10 00 */	li r0, 0x1000
/* 8009E4B8 0009B3F8  93 ED 95 20 */	stw r31, __ARQRequestQueueLo-_SDA_BASE_(r13)
/* 8009E4BC 0009B3FC  3C 60 80 0A */	lis r3, __ARQInterruptServiceRoutine@ha
/* 8009E4C0 0009B400  93 ED 95 18 */	stw r31, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8009E4C4 0009B404  38 63 E3 C8 */	addi r3, r3, __ARQInterruptServiceRoutine@l
/* 8009E4C8 0009B408  90 0D 95 38 */	stw r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8009E4CC 0009B40C  4B FF F2 05 */	bl ARRegisterDMACallback
/* 8009E4D0 0009B410  38 00 00 01 */	li r0, 1
/* 8009E4D4 0009B414  93 ED 95 28 */	stw r31, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E4D8 0009B418  93 ED 95 2C */	stw r31, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E4DC 0009B41C  93 ED 95 30 */	stw r31, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8009E4E0 0009B420  93 ED 95 34 */	stw r31, __ARQCallbackLo-_SDA_BASE_(r13)
/* 8009E4E4 0009B424  90 0D 95 3C */	stw r0, __ARQ_init_flag-_SDA_BASE_(r13)
lbl_8009E4E8:
/* 8009E4E8 0009B428  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8009E4EC 0009B42C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8009E4F0 0009B430  38 21 00 10 */	addi r1, r1, 0x10
/* 8009E4F4 0009B434  7C 08 03 A6 */	mtlr r0
/* 8009E4F8 0009B438  4E 80 00 20 */	blr 

.global ARQPostRequest
ARQPostRequest:
/* 8009E4FC 0009B43C  7C 08 02 A6 */	mflr r0
/* 8009E500 0009B440  28 0A 00 00 */	cmplwi r10, 0
/* 8009E504 0009B444  90 01 00 04 */	stw r0, 4(r1)
/* 8009E508 0009B448  38 00 00 00 */	li r0, 0
/* 8009E50C 0009B44C  94 21 FF C8 */	stwu r1, -0x38(r1)
/* 8009E510 0009B450  93 E1 00 34 */	stw r31, 0x34(r1)
/* 8009E514 0009B454  93 C1 00 30 */	stw r30, 0x30(r1)
/* 8009E518 0009B458  3B C6 00 00 */	addi r30, r6, 0
/* 8009E51C 0009B45C  93 A1 00 2C */	stw r29, 0x2c(r1)
/* 8009E520 0009B460  3B A3 00 00 */	addi r29, r3, 0
/* 8009E524 0009B464  90 03 00 00 */	stw r0, 0(r3)
/* 8009E528 0009B468  90 83 00 04 */	stw r4, 4(r3)
/* 8009E52C 0009B46C  90 A3 00 08 */	stw r5, 8(r3)
/* 8009E530 0009B470  90 E3 00 10 */	stw r7, 0x10(r3)
/* 8009E534 0009B474  91 03 00 14 */	stw r8, 0x14(r3)
/* 8009E538 0009B478  91 23 00 18 */	stw r9, 0x18(r3)
/* 8009E53C 0009B47C  41 82 00 0C */	beq lbl_8009E548
/* 8009E540 0009B480  91 5D 00 1C */	stw r10, 0x1c(r29)
/* 8009E544 0009B484  48 00 00 10 */	b lbl_8009E554
lbl_8009E548:
/* 8009E548 0009B488  3C 60 80 0A */	lis r3, __ARQCallbackHack@ha
/* 8009E54C 0009B48C  38 03 E3 C4 */	addi r0, r3, __ARQCallbackHack@l
/* 8009E550 0009B490  90 1D 00 1C */	stw r0, 0x1c(r29)
lbl_8009E554:
/* 8009E554 0009B494  4B FF 1C 79 */	bl OSDisableInterrupts
/* 8009E558 0009B498  2C 1E 00 01 */	cmpwi r30, 1
/* 8009E55C 0009B49C  3B E3 00 00 */	addi r31, r3, 0
/* 8009E560 0009B4A0  41 82 00 38 */	beq lbl_8009E598
/* 8009E564 0009B4A4  40 80 00 54 */	bge lbl_8009E5B8
/* 8009E568 0009B4A8  2C 1E 00 00 */	cmpwi r30, 0
/* 8009E56C 0009B4AC  40 80 00 08 */	bge lbl_8009E574
/* 8009E570 0009B4B0  48 00 00 48 */	b lbl_8009E5B8
lbl_8009E574:
/* 8009E574 0009B4B4  80 0D 95 20 */	lwz r0, __ARQRequestQueueLo-_SDA_BASE_(r13)
/* 8009E578 0009B4B8  28 00 00 00 */	cmplwi r0, 0
/* 8009E57C 0009B4BC  41 82 00 10 */	beq lbl_8009E58C
/* 8009E580 0009B4C0  80 6D 95 24 */	lwz r3, __ARQRequestTailLo-_SDA_BASE_(r13)
/* 8009E584 0009B4C4  93 A3 00 00 */	stw r29, 0(r3)
/* 8009E588 0009B4C8  48 00 00 08 */	b lbl_8009E590
lbl_8009E58C:
/* 8009E58C 0009B4CC  93 AD 95 20 */	stw r29, __ARQRequestQueueLo-_SDA_BASE_(r13)
lbl_8009E590:
/* 8009E590 0009B4D0  93 AD 95 24 */	stw r29, __ARQRequestTailLo-_SDA_BASE_(r13)
/* 8009E594 0009B4D4  48 00 00 24 */	b lbl_8009E5B8
lbl_8009E598:
/* 8009E598 0009B4D8  80 0D 95 18 */	lwz r0, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8009E59C 0009B4DC  28 00 00 00 */	cmplwi r0, 0
/* 8009E5A0 0009B4E0  41 82 00 10 */	beq lbl_8009E5B0
/* 8009E5A4 0009B4E4  80 6D 95 1C */	lwz r3, __ARQRequestTailHi-_SDA_BASE_(r13)
/* 8009E5A8 0009B4E8  93 A3 00 00 */	stw r29, 0(r3)
/* 8009E5AC 0009B4EC  48 00 00 08 */	b lbl_8009E5B4
lbl_8009E5B0:
/* 8009E5B0 0009B4F0  93 AD 95 18 */	stw r29, __ARQRequestQueueHi-_SDA_BASE_(r13)
lbl_8009E5B4:
/* 8009E5B4 0009B4F4  93 AD 95 1C */	stw r29, __ARQRequestTailHi-_SDA_BASE_(r13)
lbl_8009E5B8:
/* 8009E5B8 0009B4F8  80 0D 95 28 */	lwz r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E5BC 0009B4FC  28 00 00 00 */	cmplwi r0, 0
/* 8009E5C0 0009B500  40 82 00 74 */	bne lbl_8009E634
/* 8009E5C4 0009B504  80 0D 95 2C */	lwz r0, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8009E5C8 0009B508  28 00 00 00 */	cmplwi r0, 0
/* 8009E5CC 0009B50C  40 82 00 68 */	bne lbl_8009E634
/* 8009E5D0 0009B510  80 CD 95 18 */	lwz r6, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8009E5D4 0009B514  28 06 00 00 */	cmplwi r6, 0
/* 8009E5D8 0009B518  41 82 00 4C */	beq lbl_8009E624
/* 8009E5DC 0009B51C  80 66 00 08 */	lwz r3, 8(r6)
/* 8009E5E0 0009B520  28 03 00 00 */	cmplwi r3, 0
/* 8009E5E4 0009B524  40 82 00 18 */	bne lbl_8009E5FC
/* 8009E5E8 0009B528  80 86 00 10 */	lwz r4, 0x10(r6)
/* 8009E5EC 0009B52C  80 A6 00 14 */	lwz r5, 0x14(r6)
/* 8009E5F0 0009B530  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8009E5F4 0009B534  4B FF F1 21 */	bl ARStartDMA
/* 8009E5F8 0009B538  48 00 00 14 */	b lbl_8009E60C
lbl_8009E5FC:
/* 8009E5FC 0009B53C  80 86 00 14 */	lwz r4, 0x14(r6)
/* 8009E600 0009B540  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 8009E604 0009B544  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8009E608 0009B548  4B FF F1 0D */	bl ARStartDMA
lbl_8009E60C:
/* 8009E60C 0009B54C  80 6D 95 18 */	lwz r3, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8009E610 0009B550  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 8009E614 0009B554  90 0D 95 30 */	stw r0, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8009E618 0009B558  90 6D 95 28 */	stw r3, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E61C 0009B55C  80 03 00 00 */	lwz r0, 0(r3)
/* 8009E620 0009B560  90 0D 95 18 */	stw r0, __ARQRequestQueueHi-_SDA_BASE_(r13)
lbl_8009E624:
/* 8009E624 0009B564  80 0D 95 28 */	lwz r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8009E628 0009B568  28 00 00 00 */	cmplwi r0, 0
/* 8009E62C 0009B56C  40 82 00 08 */	bne lbl_8009E634
/* 8009E630 0009B570  4B FF FC 95 */	bl __ARQServiceQueueLo
lbl_8009E634:
/* 8009E634 0009B574  7F E3 FB 78 */	mr r3, r31
/* 8009E638 0009B578  4B FF 1B BD */	bl OSRestoreInterrupts
/* 8009E63C 0009B57C  80 01 00 3C */	lwz r0, 0x3c(r1)
/* 8009E640 0009B580  83 E1 00 34 */	lwz r31, 0x34(r1)
/* 8009E644 0009B584  83 C1 00 30 */	lwz r30, 0x30(r1)
/* 8009E648 0009B588  83 A1 00 2C */	lwz r29, 0x2c(r1)
/* 8009E64C 0009B58C  38 21 00 38 */	addi r1, r1, 0x38
/* 8009E650 0009B590  7C 08 03 A6 */	mtlr r0
/* 8009E654 0009B594  4E 80 00 20 */	blr 
